import{c as pe,_ as ge,Z as be,r as c,O as e,Q as J,X as ye,aj as we,ag as je,ax as te,ah as Ne,a4 as ve,S as Ce,aX as re}from"./index-Bt8dNItE.js";import{M as Se}from"./MarkdownRenderer-DWKGPb9Q.js";import{S as ke}from"./settings-Bq-BxPFa.js";import{B as Ae}from"./bar-chart-3-BgYekKb5.js";/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=pe("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Ve=({isOpen:j,onClose:_})=>{const h=ge(),{selectedModel:z}=be(),[x,b]=c.useState([]),[L,P]=c.useState(""),[A,W]=c.useState(!1),[U,E]=c.useState(null),[R,I]=c.useState(null),[B,G]=c.useState(""),[v,ae]=c.useState(!1),[X,T]=c.useState(""),[$,S]=c.useState(null),[Q,N]=c.useState([]),[se,Y]=c.useState(!1),V=c.useRef(null),Z=c.useRef(null),u=c.useRef(null);if(c.useEffect(()=>{if(!j)return;const t=Z.current;if(!t)return;let r=!1,a=!1;const n=async()=>{if(a||r||u.current)return;const s=t.getBoundingClientRect();if(!(!s.width||!s.height)){r=!0;try{const l=await re(()=>import("./index-BzBQJFYZ.js"),[]);if(a)return;const i=l.init(t);u.current=i}catch(l){console.error("ECharts init error",l)}finally{r=!1}}};n();const o=()=>{try{if(!u.current){n();return}u.current.resize()}catch(s){console.error("ECharts resize error",s)}};return window.addEventListener("resize",o),()=>{a=!0,window.removeEventListener("resize",o);const s=u.current;if(s){try{s.dispose()}catch(l){console.error("ECharts dispose error",l)}u.current===s&&(u.current=null)}}},[j]),c.useEffect(()=>{if(j&&!(!u.current||!R))try{u.current.setOption(R,!0),u.current.resize()}catch(t){console.error("ECharts setOption error",t)}},[R,j]),c.useEffect(()=>{if(u.current)try{u.current.resize()}catch(t){console.error("ECharts resize error",t)}},[v]),c.useEffect(()=>{j||(I(null),G(""),E(null),W(!1),T(""),S(null))},[j]),c.useEffect(()=>{var r;if(!x.length)return;const t=((r=x[0])==null?void 0:r.length)||0;t&&N(a=>{if(a.length===t)return a;if(a.length===0)return Array.from({length:t},()=>120);const n=[...a];for(;n.length<t;)n.push(120);return n.length>t&&(n.length=t),n})},[x]),!j)return null;const ne=()=>{V.current&&V.current.click()},oe=t=>t.split(/\r?\n/).map(a=>a.trim()).filter(a=>a.length>0).map(a=>{const n=[];let o="",s=!1;for(let l=0;l<a.length;l+=1){const i=a[l];i==='"'?s&&a[l+1]==='"'?(o+='"',l+=1):s=!s:i===","&&!s?(n.push(o),o=""):o+=i}return n.push(o),n.map(l=>l.trim())}),le=t=>{var n;const r=(n=t.target.files)==null?void 0:n[0];if(!r)return;const a=r.name.toLowerCase();if(a.endsWith(".csv")){const o=new FileReader;o.onload=s=>{var l;try{const i=String(((l=s.target)==null?void 0:l.result)||""),m=oe(i);if(!m.length){h.info("Uploaded CSV is empty.");return}b(m),h.success("CSV data loaded.")}catch(i){console.error("CSV parse error",i),h.error("Failed to parse CSV file.")}},o.readAsText(r);return}if(a.endsWith(".xlsx")||a.endsWith(".xls")){const o=new FileReader;o.onload=async s=>{var l;try{const i=(l=s.target)==null?void 0:l.result;if(!i){h.error("Failed to read Excel file.");return}const m=await re(()=>import("./xlsx-D_0l8YDs.js"),[]),w=m.read(i,{type:"array"}),C=w.SheetNames[0],p=w.Sheets[C],k=m.utils.sheet_to_json(p,{header:1});if(!k.length){h.info("Uploaded sheet is empty.");return}b(k),h.success(`Excel data loaded from sheet "${C}".`)}catch(i){console.error("Excel parse error",i),h.error("Failed to parse Excel file.")}},o.readAsArrayBuffer(r);return}h.error("Please upload a CSV or Excel file.")},ie=()=>{var a;const t=((a=x[0])==null?void 0:a.length)||3,r=Array.from({length:t},()=>"");b(n=>[...n,r])},ce=()=>{if(!x.length){const t=Array.from({length:3},()=>"");b([t]),N([120,120,120]);return}b(t=>t.map(r=>[...r,""])),N(t=>t.length?[...t,t[t.length-1]||120]:[120])},de=()=>{b([]),N([])},he=()=>{var l,i;if(!x.length){h.info("No data to auto fit. Please add or upload data first.");return}const t=x,r=((l=t[0])==null?void 0:l.length)||0;if(!r)return;const a=80,n=400,o=12,s=[];for(let m=0;m<r;m+=1){let w=0;for(let p=0;p<t.length;p+=1){const k=((i=t[p])==null?void 0:i[m])??"",O=String(k).length;O>w&&(w=O)}const C=Math.min(n,Math.max(a,w*o));s.push(C)}N(s),h.success("Columns auto fitted to data.")},ue=(t,r,a)=>{b(n=>{const o=n.map(s=>[...s]);return o[t]?(o[t][r]=a,o):n})},xe=t=>{if(T(t),!t.trim()){I(null),S(null);return}try{const r=JSON.parse(t);I(r),S(null)}catch{S("Invalid JSON. Fix errors to update the chart.")}},q=async(t,r)=>{var a,n,o;if(!t.length){h.info("Please upload data or enter data into the sheet.");return}if(!r.trim()){h.info("Please describe how to interpret and chart the data.");return}W(!0),E(null);try{const s=t[0]||[],l=t.slice(1),i=r.trim(),m={header:s,rows:l},w="You are an expert data visualization analyst and a master of the Apache ECharts library (version 5). Your task is to interpret a user request and data, then generate the most effective and insightful ECharts configuration. You must respond with a single, valid JSON object only, containing no markdown, no comments, and no text outside the JSON structure.",C=`User Goal:
${i}

Data Table (first row is header):
${JSON.stringify(m,null,2)}

Instructions:
1. Analyze the goal and data to infer data types and relationships.
2. Select the single most effective chart type based on the goal.
3. Use the ECharts "dataset" property to hold the raw data.
4. Configure a clear title, axis names, and legends where needed.
5. Add rich tooltips and helpful interactive features (dataZoom, toolbox, brush).
6. Apply professional styling so the chart is readable and not cluttered.
7. When using transforms, follow ECharts v5 rules: boxplot transforms must include "groupBy", aggregate transforms must use "aggregate" with "op" and "as".

Response format (JSON only, no backticks):
{
  "option": {},
  "interpretation": {
    "chartType": "Name of the chosen chart type.",
    "rationale": "Why this chart type is a good fit.",
    "insights": [
      "Key insight one.",
      "Key insight two."
    ]
  }
}`,p=await fetch("https://multi-model-worker.study-llm.me/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:z,messages:[{role:"system",content:w},{role:"user",content:C}],stream:!1})});if(!p.ok)throw new Error(`API error: ${p.statusText}`);const O=((o=(n=(a=(await p.json()).choices)==null?void 0:a[0])==null?void 0:n.message)==null?void 0:o.content)||"{}",H=String(O).replace(/```json/gi,"").replace(/```/g,"").trim().replace(/,\s*"formatter"\s*:\s*function\s*\([^)]*\)\s*\{[\s\S]*?},/g,"},").replace(/,\s*"formatter"[\s\S]*?},/g,"},").replace(/:\s*function\s*\([^)]*\)\s*\{[\s\S]*?\}/g,": null");let f;try{f=JSON.parse(H)}catch(g){throw console.error("Failed to parse AI chart response",g,H),new Error("AI returned invalid JSON for chart option.")}if(!f||typeof f!="object"||!f.option)throw new Error('AI response does not contain a valid "option" field.');const d={...f.option};if(d.toolbox||(d.toolbox={}),typeof d.toolbox=="object"&&!Array.isArray(d.toolbox)){const g=d.toolbox.feature||{};d.toolbox.feature={...g,dataZoom:{yAxisIndex:"none"},restore:g.restore||{},saveAsImage:g.saveAsImage||{}}}d.dataZoom||(d.dataZoom=[{type:"slider",yAxisIndex:0,orient:"vertical",right:5,top:60,bottom:40}]),d.grid||(d.grid={}),typeof d.grid=="object"&&!Array.isArray(d.grid)&&d.grid.top===void 0&&(d.grid.top=80),I(d),T(JSON.stringify(d,null,2)),S(null);let D="";if(typeof f.interpretation=="string")D=f.interpretation;else if(f.interpretation&&typeof f.interpretation=="object"){const g=f.interpretation,K=g.chartType,ee=g.rationale,F=g.insights,M=[];K&&M.push(`Chart type: ${K}`),ee&&M.push(`Rationale: ${ee}`),Array.isArray(F)&&F.length>0&&M.push("Insights:",...F.map(fe=>`- ${fe}`)),D=M.join(`

`)}G(D),h.success("Chart generated.")}catch(s){console.error("Generate chart error",s),s!=null&&s.message&&(s.message.includes("Failed to fetch")||s.message.includes("Network"))?(E("Network error while contacting the AI service. Please check your connection and try again."),h.error("Network error while contacting the AI service.")):(E((s==null?void 0:s.message)||"Failed to generate chart from AI."),h.error("Failed to generate chart from AI."))}finally{W(!1)}},me=()=>{q(x,L)},y=t=>{var o;let r,a;t==="pareto"?(r=[["Category","Value"],["Defect A","80"],["Defect B","40"],["Defect C","25"],["Defect D","15"],["Defect E","10"]],a="Create a Pareto chart where Category is on the X axis, Value is the bar series, and the cumulative percentage line is overlaid on a second Y axis."):t==="sankey"?(r=[["Source","Target","Value"],["Email","Website","120"],["Email","Sales","45"],["Ads","Website","180"],["Ads","Sales","60"],["Social","Website","90"],["Social","Sales","30"]],a="Create a Sankey diagram showing the flow from Source to Target using Value as the link weight."):t==="boxplot"?(r=[["Region","Value"],["North","12"],["North","15"],["North","18"],["North","22"],["North","25"],["South","10"],["South","14"],["South","17"],["South","19"],["South","23"],["East","8"],["East","11"],["East","15"],["East","18"],["East","21"],["West","9"],["West","13"],["West","16"],["West","20"],["West","24"]],a="Create a boxplot chart grouping values by Region to compare distributions, with mean lines connected in red color between groups."):t==="timeSeries"?(r=[["Month","Actual","Target"],["Jan","72"],["Feb","75"],["Mar","78"],["Apr","81"],["May","79"],["Jun","83"],["Jul","85"],["Aug","88"],["Sep","86"],["Oct","89"],["Nov","91"],["Dec","93"]],a="Create a dual-line time series chart where Month is on the X axis, Actual and Target are two smooth line series with markers, and the area under the Actual line is lightly filled to emphasize improvement over time. Add a tooltip with all series values and a legend at the top."):t==="stackedBar"?(r=[["Region","On-time","Late","Very Late"],["North","160","40","10"],["South","140","55","20"],["East","120","60","25"],["West","150","35","15"]],a="Create a stacked bar chart where Region is on the X axis and On-time, Late, and Very Late are stacked bar series on the Y axis to show shipment reliability mix by region. Include percentage labels inside the bars and a legend at the bottom."):t==="dualAxis"?(r=[["Quarter","Revenue","MarginPercent"],["Q1-2024","420000","18.5"],["Q2-2024","460000","19.2"],["Q3-2024","510000","17.8"],["Q4-2024","580000","20.4"]],a="Create a combo chart with Revenue as blue bars on the primary Y axis and MarginPercent as an orange line with circle markers on a secondary Y axis (0 to 25). Use Quarter on the X axis and show both values in the tooltip when hovering."):t==="funnel"?(r=[["Stage","Count"],["Visited site","12000"],["Signed up","5100"],["Activated trial","2300"],["Requested quote","900"],["Closed deal","320"]],a="Create a funnel chart with Stage on the Y axis and Count as the funnel value, sorted from largest to smallest. Show conversion percentages between stages in the labels so the user can see drop-off at each step."):(r=[["Sample","Value"],["1","-0.8"],["2","-0.2"],["3","0.1"],["4","0.4"],["5","0.0"],["6","0.6"],["7","1.1"],["8","0.9"],["9","-0.4"],["10","0.3"],["11","0.7"],["12","1.3"],["13","-0.6"],["14","0.2"],["15","0.5"],["16","1.0"],["17","-0.3"],["18","0.8"],["19","1.2"],["20","0.4"]],a="Create a histogram or density-style chart to show the approximate normal distribution of the Value column."),b(r);const n=((o=r[0])==null?void 0:o.length)||0;if(n>0){const s=Array.from({length:n},()=>140);N(s)}else N([]);P(a),Y(!1),q(r,a)};return e.jsxs("div",{className:"fixed inset-0 z-[90] flex items-center justify-center overflow-hidden no-scrollbar",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-900/60",onClick:()=>{A||_()}}),e.jsxs("div",{className:"relative z-[95] flex h-full w-full flex-col bg-white shadow-2xl border border-gray-200 rounded-none overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-4 py-3 sm:px-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-md bg-blue-50 text-blue-600",children:e.jsx(J,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"Data Charting"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Upload a CSV or Excel file, shape the data, and let AI design an ECharts chart."})]})]}),e.jsx("button",{type:"button",onClick:()=>{A||_()},className:"rounded-full p-1.5 text-gray-400 hover:bg-gray-100 hover:text-gray-600 transition-colors",children:e.jsx(ye,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-1 flex-col gap-3 overflow-y-auto lg:overflow-hidden pb-4 pt-3 sm:pb-6 sm:pt-4",children:e.jsxs("div",{className:"flex min-h-0 flex-1 flex-col gap-3 lg:flex-row",children:[e.jsxs("div",{className:v?"flex min-h-0 w-9 flex-none flex-col border-r border-gray-200 bg-gray-50 overflow-hidden":"flex min-h-0 flex-1 w-full flex-col gap-3 border-r border-gray-200 bg-gray-50 p-3 lg:w-1/2 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[!v&&e.jsxs("span",{className:"text-[11px] font-semibold text-gray-600 flex items-center gap-1.5",children:[e.jsx(ke,{className:"h-3 w-3 text-gray-500"}),"Setup"]}),e.jsx("button",{type:"button",onClick:()=>ae(t=>!t),className:"inline-flex h-6 w-6 items-center justify-center rounded-md border border-gray-300 bg-white text-xs text-gray-600 hover:bg-gray-50",title:v?"Expand sidebar":"Collapse sidebar",children:v?e.jsx(we,{className:"h-3 w-3"}):e.jsx(je,{className:"h-3 w-3"})})]}),!v&&e.jsxs("div",{className:"flex flex-1 flex-col gap-3 overflow-y-auto pr-1 text-xs",children:[e.jsxs("div",{className:"rounded-md border border-dashed border-gray-300 bg-white p-3",children:[e.jsxs("h3",{className:"mb-1 flex items-center text-xs font-semibold text-gray-800",children:[e.jsx(te,{className:"mr-1.5 h-3.5 w-3.5 text-blue-500"}),"Upload Data"]}),e.jsx("p",{className:"mb-2 text-[11px] text-gray-500",children:"Upload a CSV or Excel file. The first row will be treated as the header."}),e.jsxs("button",{type:"button",onClick:ne,className:"inline-flex w-full items-center justify-center rounded-md border border-gray-300 bg-white px-2 py-1.5 text-xs font-medium text-gray-700 shadow-sm hover:bg-gray-50",children:[e.jsx(te,{className:"mr-1.5 h-3 w-3"}),"Choose CSV / Excel"]}),e.jsx("input",{ref:V,type:"file",accept:".csv,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",className:"hidden",onChange:le})]}),e.jsxs("div",{className:"rounded-md border border-gray-200 bg-white p-3",children:[e.jsxs("h3",{className:"mb-2 flex items-center text-xs font-semibold text-gray-800",children:[e.jsx(Ne,{className:"mr-1.5 h-3.5 w-3.5 text-emerald-500"}),"Data Sheet"]}),e.jsx("p",{className:"mb-2 text-[11px] text-gray-500",children:"Edit cells or add rows and columns to adjust your data."}),e.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("button",{type:"button",onClick:()=>Y(t=>!t),className:"inline-flex w-full items-center justify-center rounded-md border border-gray-300 bg-white px-2 py-1 text-[11px] font-medium text-gray-700 hover:bg-gray-50",children:"Sample Data"}),se&&e.jsxs("div",{className:"absolute z-10 mt-1 w-full rounded-md border border-gray-200 bg-white text-[11px] shadow-lg",children:[e.jsx("button",{type:"button",onClick:()=>y("pareto"),className:"block w-full px-2 py-1 text-left hover:bg-gray-50",children:"Pareto chart"}),e.jsx("button",{type:"button",onClick:()=>y("sankey"),className:"block w-full px-2 py-1 text-left hover:bg-gray-50",children:"Sankey diagram"}),e.jsx("button",{type:"button",onClick:()=>y("boxplot"),className:"block w-full px-2 py-1 text-left hover:bg-gray-50",children:"Boxplot by category"}),e.jsx("button",{type:"button",onClick:()=>y("timeSeries"),className:"block w-full px-2 py-1 text-left hover:bg-gray-50",children:"Time-series target vs actual"}),e.jsx("button",{type:"button",onClick:()=>y("stackedBar"),className:"block w-full px-2 py-1 text-left hover:bg-gray-50",children:"Stacked bar by category"}),e.jsx("button",{type:"button",onClick:()=>y("dualAxis"),className:"block w-full px-2 py-1 text-left hover:bg-gray-50",children:"Dual-axis revenue and margin"}),e.jsx("button",{type:"button",onClick:()=>y("funnel"),className:"block w-full px-2 py-1 text-left hover:bg-gray-50",children:"Funnel conversion stages"}),e.jsx("button",{type:"button",onClick:()=>y("normal"),className:"block w-full px-2 py-1 text-left hover:bg-gray-50",children:"Normal distribution"})]})]}),e.jsx("button",{type:"button",onClick:ie,className:"inline-flex flex-1 items-center justify-center rounded-md border border-gray-300 bg-white px-2 py-1 text-[11px] font-medium text-gray-700 hover:bg-gray-50",children:"+ Row"}),e.jsx("button",{type:"button",onClick:ce,className:"inline-flex flex-1 items-center justify-center rounded-md border border-gray-300 bg-white px-2 py-1 text-[11px] font-medium text-gray-700 hover:bg-gray-50",children:"+ Column"}),e.jsx("button",{type:"button",onClick:de,className:"inline-flex flex-1 items-center justify-center rounded-md border border-gray-200 bg-gray-50 px-2 py-1 text-[11px] font-medium text-gray-500 hover:bg-gray-100",children:"Clear"}),e.jsx("button",{type:"button",onClick:he,className:"inline-flex flex-1 items-center justify-center rounded-md border border-gray-300 bg-white px-2 py-1 text-[11px] font-medium text-gray-700 hover:bg-gray-50",children:"Auto Fit"})]}),e.jsx("div",{className:"max-h-48 overflow-auto rounded border border-gray-200",children:x.length===0?e.jsx("div",{className:"flex items-center justify-center px-3 py-6 text-[11px] text-gray-400",children:"No data yet. Upload a file or add a row to start."}):e.jsxs("table",{className:"min-w-max border-collapse text-[11px] table-fixed",children:[e.jsx("colgroup",{children:(x[0]||[]).map((t,r)=>e.jsx("col",{style:{width:Q[r]||120,minWidth:60}},r))}),e.jsx("tbody",{children:x.map((t,r)=>e.jsx("tr",{className:r===0?"bg-gray-50":"",children:t.map((a,n)=>e.jsx("td",{className:"border border-gray-200 px-1 py-0.5",style:{width:Q[n]||120,minWidth:60},children:e.jsx("input",{value:a,onChange:o=>ue(r,n,o.target.value),className:"w-full border-none bg-transparent p-0 text-[11px] focus:outline-none focus:ring-0"})},`${r}-${n}`))},r))})]})})]}),e.jsxs("div",{className:"rounded-md border border-gray-200 bg-white p-3",children:[e.jsxs("div",{className:"mb-1 flex items-center justify-between gap-2",children:[e.jsxs("h3",{className:"flex items-center text-xs font-semibold text-gray-800",children:[e.jsx(Ae,{className:"mr-1.5 h-3.5 w-3.5 text-indigo-500"}),e.jsx("span",{children:"How should the data be charted?"})]}),e.jsx("a",{href:"https://echarts.apache.org/examples/en/index.html",target:"_blank",rel:"noreferrer",className:"text-[11px] text-indigo-600 hover:text-indigo-700 hover:underline",children:"ECharts examples"})]}),e.jsx("p",{className:"mb-2 text-[11px] text-gray-500",children:"Describe which columns are dimensions and metrics, and what chart you expect."}),e.jsx("textarea",{value:L,onChange:t=>P(t.target.value),rows:4,className:"mt-1 block w-full rounded-md border border-gray-300 px-2 py-1 text-xs shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Example: Use the Month column as X axis and plot Actual and Target as two line series."})]}),e.jsxs("div",{className:"rounded-md border border-gray-200 bg-white p-3",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsxs("h3",{className:"flex items-center text-xs font-semibold text-gray-800",children:[e.jsx(Ee,{className:"mr-1.5 h-3.5 w-3.5 text-indigo-500"}),e.jsx("span",{children:"Generate with AI"})]}),e.jsxs("span",{className:"rounded-full bg-indigo-50 px-2 py-0.5 text-[10px] font-medium text-indigo-700",children:["Model: ",z]})]}),e.jsx("p",{className:"mb-2 text-[11px] text-gray-500",children:"AI will return an ECharts option and a short interpretation based on your data and instructions."}),U&&e.jsx("p",{className:"mb-2 text-[11px] text-red-600",children:U}),e.jsx("button",{type:"button",onClick:me,disabled:A,className:"inline-flex w-full items-center justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-medium text-white shadow-sm hover:bg-indigo-700 disabled:opacity-50",children:A?e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"mr-1.5 h-3 w-3 animate-spin"}),"Generating chart..."]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-1.5 h-3 w-3"}),"Generate Chart with AI"]})})]}),X&&e.jsxs("div",{className:"rounded-md border border-gray-200 bg-white p-3",children:[e.jsxs("div",{className:"mb-1 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-800",children:"ECharts Option (JSON)"}),$&&e.jsx("span",{className:"text-[10px] text-red-600",children:$})]}),e.jsx("p",{className:"mb-2 text-[11px] text-gray-500",children:"Edit this JSON to tweak the chart. Valid changes update the chart immediately."}),e.jsx("textarea",{value:X,onChange:t=>xe(t.target.value),rows:10,spellCheck:!1,className:"mt-1 block w-full rounded-md border border-gray-300 px-2 py-1 text-[11px] font-mono shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"})]})]})]}),e.jsxs("div",{className:"flex min-h-0 flex-1 flex-col gap-3 overflow-y-auto",children:[e.jsxs("div",{className:"flex-1 rounded-md border border-gray-200 bg-white p-3",children:[e.jsxs("h3",{className:"mb-2 flex items-center text-xs font-semibold text-gray-800",children:[e.jsx(J,{className:"mr-1.5 h-3.5 w-3.5 text-blue-500"}),e.jsx("span",{children:"Chart"})]}),e.jsxs("div",{className:"relative h-64 w-full sm:h-80 lg:h-[420px]",children:[e.jsx("div",{ref:Z,className:"h-full w-full rounded border border-dashed border-gray-200 bg-gray-50"}),!R&&e.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center px-4 text-center text-xs text-gray-400",children:"The chart will appear here after AI generates an ECharts option."})]})]}),e.jsxs("div",{className:"flex flex-1 min-h-[140px] flex-col rounded-md border border-gray-200 bg-white p-3",children:[e.jsxs("h3",{className:"mb-1 flex items-center text-xs font-semibold text-gray-800",children:[e.jsx(Ce,{className:"mr-1.5 h-3.5 w-3.5 text-indigo-500"}),e.jsx("span",{children:"AI Interpretation"})]}),e.jsx("div",{className:"mt-1 flex-1 overflow-y-auto text-xs text-gray-700",children:B?e.jsx(Se,{content:B}):e.jsx("p",{className:"text-[11px] text-gray-400",children:"After the chart is generated, AI will explain the key patterns and insights here."})})]})]})]})})]})]})};export{Ve as DataChartingModal};
