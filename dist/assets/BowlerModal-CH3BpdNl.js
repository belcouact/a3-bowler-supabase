import{r as u,Y as C,O as e,aD as M,X as S,d as f,$ as c,aa as G,ab as T}from"./index-CkQ3Zd4U.js";import{T as j}from"./trash-2-BiQq3o0q.js";const P=({isOpen:h,onClose:m,onSave:y,onDelete:b,initialData:r})=>{const[x,g]=u.useState("General"),v=C(),[t,n]=u.useState({name:"",description:"",group:"",champion:"",commitment:"",tag:""}),[a,d]=u.useState([]);if(u.useEffect(()=>{h&&(g("General"),r?(n({name:r.name,description:r.description||"",group:r.group||"",champion:r.champion||"",commitment:r.commitment||"",tag:r.tag||""}),d(r.metrics||[])):(n({name:"",description:"",group:"",champion:"",commitment:"",tag:""}),d([])))},[h,r]),!h)return null;const w=()=>{const s={id:T(),name:"",definition:"",owner:"",scope:"",attribute:"",targetMeetingRule:"gte"};d([...a,s])},o=(s,i,l)=>{d(a.map(p=>p.id===s?{...p,[i]:l}:p))},N=s=>{d(a.filter(i=>i.id!==s))},k=()=>{if(!t.name.trim()){v.error("Please provide a name for the Bowler List.");return}y({...t,metrics:a}),m()};return e.jsx("div",{className:"fixed inset-0 z-[70] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:m,children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[e.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-blue-500 to-indigo-500 text-white shadow-md",children:e.jsx(M,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg leading-6 font-semibold text-gray-900",children:r?"Edit Metric Bowler":"New Metric Bowler"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:r?"Update bowler details and metrics used in your dashboards.":"Set up a new bowler with key ownership and metric information."})]})]}),e.jsx("button",{onClick:m,className:"ml-4 rounded-full p-1.5 text-gray-400 hover:bg-gray-100 hover:text-gray-600 transition","aria-label":"Close",children:e.jsx(S,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"border-b border-gray-200 mb-4",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>g("General"),className:f("whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm",x==="General"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"General"}),e.jsx("button",{onClick:()=>g("Metrics"),className:f("whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm",x==="Metrics"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Metrics"})]})}),e.jsxs("div",{className:"min-h-[300px]",children:[x==="General"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-2 rounded-md border border-blue-50 bg-blue-50/80 px-3 py-2 text-xs text-blue-800",children:[e.jsx(c,{className:"mt-0.5 h-4 w-4 flex-shrink-0 text-blue-500"}),e.jsx("p",{children:"Capture how this bowler appears in reports, who owns it, and how it is grouped."})]}),e.jsxs("div",{className:"space-y-3 rounded-lg border border-gray-100 bg-gray-50/60 p-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold tracking-wide text-gray-500 uppercase",children:"Bowler overview"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Name this bowler and describe what performance area it represents."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mt-2 block text-sm font-medium text-gray-700",children:"Bowler Name *"}),e.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:t.name,onChange:s=>n({...t,name:s.target.value}),placeholder:"e.g. Plant A - Operations"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",rows:3,value:t.description,onChange:s=>n({...t,description:s.target.value})})]})]}),e.jsxs("div",{className:"space-y-3 rounded-lg border border-gray-100 bg-white p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold tracking-wide text-gray-500 uppercase",children:"Champion & team"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Clarify who champions this bowler and which team they belong to."})]}),e.jsxs("div",{className:"hidden sm:flex flex-col items-end space-y-1",children:[t.champion&&e.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-50 px-2 py-0.5 text-[11px] font-medium text-blue-700 border border-blue-100",children:t.champion}),t.commitment&&e.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-[11px] font-medium text-gray-600",children:t.commitment})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Champion"}),e.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:t.champion,onChange:s=>n({...t,champion:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Commitment"}),e.jsxs("select",{className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:t.commitment,onChange:s=>n({...t,commitment:s.target.value}),children:[e.jsx("option",{value:"",children:"Select Team"}),e.jsx("option",{value:"Quality",children:"Quality"}),e.jsx("option",{value:"Engineering",children:"Engineering"}),e.jsx("option",{value:"R&D",children:"R&D"}),e.jsx("option",{value:"Workshop",children:"Workshop"}),e.jsx("option",{value:"Production",children:"Production"}),e.jsx("option",{value:"GBS",children:"GBS"}),e.jsx("option",{value:"Procurement",children:"Procurement"}),e.jsx("option",{value:"Planning",children:"Planning"}),e.jsx("option",{value:"EH&S",children:"EH&S"}),e.jsx("option",{value:"Facility",children:"Facility"}),e.jsx("option",{value:"Sales & Marketing",children:"Sales & Marketing"})]})]})]})]}),e.jsxs("div",{className:"space-y-3 rounded-lg border border-gray-100 bg-white p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold tracking-wide text-gray-500 uppercase",children:"Group & tag"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Group and tag are mainly used for consolidation across multiple bowlers and reports."})]}),e.jsxs("div",{className:"hidden sm:flex flex-col items-end space-y-1",children:[e.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-[11px] font-medium text-gray-600",children:t.group||"Ungrouped"}),t.tag&&e.jsx("span",{className:"inline-flex items-center rounded-full bg-indigo-50 px-2 py-0.5 text-[11px] font-medium text-indigo-700 border border-indigo-100",children:t.tag})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 flex items-center",title:"Group multiple bowlers under one group",children:["Group",e.jsx(c,{className:"w-4 h-4 ml-1 text-gray-400 cursor-help"})]}),e.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:t.group,onChange:s=>n({...t,group:s.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 flex items-center",title:"Mainly used for consolidation across reports",children:["Tag",e.jsx(c,{className:"w-4 h-4 ml-1 text-gray-400 cursor-help"})]}),e.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:t.tag,onChange:s=>n({...t,tag:s.target.value})})]})]})]})]}),x==="Metrics"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-2 rounded-md border border-indigo-50 bg-indigo-50/80 px-3 py-2 text-xs text-indigo-800",children:[e.jsx(c,{className:"mt-0.5 h-4 w-4 flex-shrink-0 text-indigo-500"}),e.jsx("p",{children:"Define the metrics tracked for this bowler, including ownership, scope, and targets."})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("span",{className:"text-xs text-gray-500",children:a.length===0?"No metrics configured yet":`${a.length} metric${a.length>1?"s":""} configured`}),e.jsxs("button",{onClick:w,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Add Metric"]})]})]}),e.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto",children:a.length===0?e.jsx("div",{className:"text-center py-10 text-gray-500 italic",children:'No metrics added yet. Click "Add Metric" to start.'}):a.map((s,i)=>e.jsxs("div",{className:"border border-gray-200 rounded-md p-4 bg-gray-50 relative",children:[e.jsx("button",{onClick:()=>N(s.id),className:"absolute top-2 right-2 text-gray-400 hover:text-red-500",title:"Remove Metric",children:e.jsx(j,{className:"w-4 h-4"})}),e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border border-gray-200 bg-white text-xs font-semibold text-gray-700 shadow-sm",children:i+1}),e.jsxs("div",{className:"text-xs font-semibold text-gray-600",children:["Metric ",i+1]})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-3",children:[e.jsxs("div",{className:"col-span-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Metric Name"}),e.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm",value:s.name,onChange:l=>o(s.id,"name",l.target.value)})]}),e.jsxs("div",{className:"col-span-8",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Definition"}),e.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm",value:s.definition,onChange:l=>o(s.id,"definition",l.target.value)})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Owner"}),e.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm",value:s.owner,onChange:l=>o(s.id,"owner",l.target.value)})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-500 flex items-center",title:"What is included for this metric measurement",children:["Scope",e.jsx(c,{className:"w-3 h-3 ml-1 text-gray-400 cursor-help"})]}),e.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm",value:s.scope,onChange:l=>o(s.id,"scope",l.target.value)})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Attribute"}),e.jsxs("select",{className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm",value:s.attribute,onChange:l=>o(s.id,"attribute",l.target.value),children:[e.jsx("option",{value:"",children:"Select Attribute"}),e.jsx("option",{value:"Individual data",children:"Individual data"}),e.jsx("option",{value:"Moving average",children:"Moving average"}),e.jsx("option",{value:"Accumulative",children:"Accumulative"})]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Target Rule"}),e.jsxs("select",{className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm",value:s.targetMeetingRule||"gte",onChange:l=>o(s.id,"targetMeetingRule",l.target.value),children:[e.jsxs("option",{value:"gte",children:[">="," Target"]}),e.jsxs("option",{value:"lte",children:["<="," Target"]}),e.jsx("option",{value:"within_range",children:"Within Range"})]})]})]})]},s.id))})]})]})]}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 flex flex-col sm:flex-row justify-between items-center gap-3 sm:gap-0",children:[e.jsx("div",{className:"order-2 sm:order-1 w-full sm:w-auto",children:r&&b&&e.jsxs("button",{type:"button",className:"w-full sm:w-auto inline-flex justify-center items-center rounded-md border border-transparent px-4 py-2 text-red-600 hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm font-medium",onClick:()=>b(r.id),children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Delete"]})}),e.jsxs("div",{className:"order-1 sm:order-2 flex flex-col sm:flex-row-reverse w-full sm:w-auto",children:[e.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:k,children:r?"Save Changes":"Create Bowler"}),e.jsx("button",{type:"button",className:"mt-3 sm:mt-0 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:w-auto sm:text-sm",onClick:m,children:"Cancel"})]})]})]})]})})};export{P as default};
