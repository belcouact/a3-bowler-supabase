import{c as be,g as pr,i as te,G as Gt,a as rt,m as yr,b as ye,d as me,R as S,T as xr,s as nt,f as se,e as Nt,L as Me,h as gr,j as vr,r as z,u as mt,k as pt,l as br,n as wr,o as jr,w as kt,p as Vt,q as Ue,D as Nr,t as kr,E as Or,C as Sr,A as Ar,v as Ee,x as Pr,y as st,z as Dr,B as _r,F as Yt,H as $r,I as Ot,J as Cr,K as Tr,M as Er,N as Mr,O as a,X as Kt,S as Ht,P as Ir,Q as St,U as zr,V as Lr,W as Fr,Y as Rr,Z as Br,_ as Wr,$ as Gr,a0 as At,a1 as Vr,a2 as Ut,a3 as Pt,a4 as Yr,a5 as Kr,a6 as Hr,a7 as Ur,a8 as Xr,a9 as at,aa as Dt,ab as _t}from"./index-Czntt7dg.js";import{T as qr,A as $t}from"./target-CiJBARw5.js";import{A as Jr}from"./alert-triangle-DpBq1Jkc.js";import{analyzeMetric as Ct,generateA3PlanFromMetric as Zr}from"./aiService-c9KlTcET.js";/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=be("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=be("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=be("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=be("MousePointer",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=be("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=be("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);function Xt(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function an(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return pr(r,n)}function sn(e,t,n){var r=n==="width",i=e.x,s=e.y,o=e.width,c=e.height;return t===1?{start:r?i:s,end:r?i+o:s+c}:{start:r?i+o:s+c,end:r?i:s}}function Ge(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function on(e,t){return Xt(e,t+1)}function ln(e,t,n,r,i){for(var s=(r||[]).slice(),o=t.start,c=t.end,u=0,m=1,d=o,x=function(){var p=r==null?void 0:r[u];if(p===void 0)return{v:Xt(r,m)};var v=u,b,A=function(){return b===void 0&&(b=n(p,v)),b},O=p.coordinate,j=u===0||Ge(e,O,A,d,c);j||(u=0,d=o,m+=1),j&&(d=O+e*(A()/2+i),u+=m)},f;m<=s.length;)if(f=x(),f)return f.v;return[]}function ze(e){"@babel/helpers - typeof";return ze=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ze(e)}function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mt(Object(n),!0).forEach(function(r){cn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cn(e,t,n){return t=un(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function un(e){var t=dn(e,"string");return ze(t)=="symbol"?t:t+""}function dn(e,t){if(ze(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ze(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fn(e,t,n,r,i){for(var s=(r||[]).slice(),o=s.length,c=t.start,u=t.end,m=function(f){var h=s[f],p,v=function(){return p===void 0&&(p=n(h,f)),p};if(f===o-1){var b=e*(h.coordinate+e*v()/2-u);s[f]=h=H(H({},h),{},{tickCoord:b>0?h.coordinate-b*e:h.coordinate})}else s[f]=h=H(H({},h),{},{tickCoord:h.coordinate});var A=Ge(e,h.tickCoord,v,c,u);A&&(u=h.tickCoord-e*(v()/2+i),s[f]=H(H({},h),{},{isShow:!0}))},d=o-1;d>=0;d--)m(d);return s}function hn(e,t,n,r,i,s){var o=(r||[]).slice(),c=o.length,u=t.start,m=t.end;if(s){var d=r[c-1],x=n(d,c-1),f=e*(d.coordinate+e*x/2-m);o[c-1]=d=H(H({},d),{},{tickCoord:f>0?d.coordinate-f*e:d.coordinate});var h=Ge(e,d.tickCoord,function(){return x},u,m);h&&(m=d.tickCoord-e*(x/2+i),o[c-1]=H(H({},d),{},{isShow:!0}))}for(var p=s?c-1:c,v=function(O){var j=o[O],D,$=function(){return D===void 0&&(D=n(j,O)),D};if(O===0){var B=e*(j.coordinate-e*$()/2-u);o[O]=j=H(H({},j),{},{tickCoord:B<0?j.coordinate-B*e:j.coordinate})}else o[O]=j=H(H({},j),{},{tickCoord:j.coordinate});var W=Ge(e,j.tickCoord,$,u,m);W&&(u=j.tickCoord+e*($()/2+i),o[O]=H(H({},j),{},{isShow:!0}))},b=0;b<p;b++)v(b);return o}function yt(e,t,n){var r=e.tick,i=e.ticks,s=e.viewBox,o=e.minTickGap,c=e.orientation,u=e.interval,m=e.tickFormatter,d=e.unit,x=e.angle;if(!i||!i.length||!r)return[];if(te(u)||Gt.isSsr)return on(i,typeof u=="number"&&te(u)?u:0);var f=[],h=c==="top"||c==="bottom"?"width":"height",p=d&&h==="width"?rt(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},v=function(j,D){var $=ye(m)?m(j.value,D):j.value;return h==="width"?an(rt($,{fontSize:t,letterSpacing:n}),p,x):rt($,{fontSize:t,letterSpacing:n})[h]},b=i.length>=2?yr(i[1].coordinate-i[0].coordinate):1,A=sn(s,b,h);return u==="equidistantPreserveStart"?ln(b,A,v,i,o):(u==="preserveStart"||u==="preserveStartEnd"?f=hn(b,A,v,i,o,u==="preserveStartEnd"):f=fn(b,A,v,i,o),f.filter(function(O){return O.isShow}))}var mn=["viewBox"],pn=["viewBox"],yn=["ticks"];function Ae(e){"@babel/helpers - typeof";return Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(e)}function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se.apply(this,arguments)}function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?It(Object(n),!0).forEach(function(r){xt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function it(e,t){if(e==null)return{};var n=xn(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function xn(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function gn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jt(r.key),r)}}function vn(e,t,n){return t&&zt(e.prototype,t),n&&zt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function bn(e,t,n){return t=Ve(t),wn(e,qt()?Reflect.construct(t,n||[],Ve(e).constructor):t.apply(e,n))}function wn(e,t){if(t&&(Ae(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jn(e)}function jn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qt=function(){return!!e})()}function Ve(e){return Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ve(e)}function Nn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ot(e,t)}function ot(e,t){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ot(e,t)}function xt(e,t,n){return t=Jt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jt(e){var t=kn(e,"string");return Ae(t)=="symbol"?t:t+""}function kn(e,t){if(Ae(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ae(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $e=function(e){function t(n){var r;return gn(this,t),r=bn(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return Nn(t,e),vn(t,[{key:"shouldComponentUpdate",value:function(r,i){var s=r.viewBox,o=it(r,mn),c=this.props,u=c.viewBox,m=it(c,pn);return!nt(s,u)||!nt(o,m)||!nt(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.x,o=i.y,c=i.width,u=i.height,m=i.orientation,d=i.tickSize,x=i.mirror,f=i.tickMargin,h,p,v,b,A,O,j=x?-1:1,D=r.tickSize||d,$=te(r.tickCoord)?r.tickCoord:r.coordinate;switch(m){case"top":h=p=r.coordinate,b=o+ +!x*u,v=b-j*D,O=v-j*f,A=$;break;case"left":v=b=r.coordinate,p=s+ +!x*c,h=p-j*D,A=h-j*f,O=$;break;case"right":v=b=r.coordinate,p=s+ +x*c,h=p+j*D,A=h+j*f,O=$;break;default:h=p=r.coordinate,b=o+ +x*u,v=b+j*D,O=v+j*f,A=$;break}return{line:{x1:h,y1:v,x2:p,y2:b},tick:{x:A,y:O}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,o;switch(i){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,s=r.y,o=r.width,c=r.height,u=r.orientation,m=r.mirror,d=r.axisLine,x=V(V(V({},se(this.props,!1)),se(d,!1)),{},{fill:"none"});if(u==="top"||u==="bottom"){var f=+(u==="top"&&!m||u==="bottom"&&m);x=V(V({},x),{},{x1:i,y1:s+f*c,x2:i+o,y2:s+f*c})}else{var h=+(u==="left"&&!m||u==="right"&&m);x=V(V({},x),{},{x1:i+h*o,y1:s,x2:i+h*o,y2:s+c})}return S.createElement("line",Se({},x,{className:me("recharts-cartesian-axis-line",Nt(d,"className"))}))}},{key:"renderTicks",value:function(r,i,s){var o=this,c=this.props,u=c.tickLine,m=c.stroke,d=c.tick,x=c.tickFormatter,f=c.unit,h=yt(V(V({},this.props),{},{ticks:r}),i,s),p=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),b=se(this.props,!1),A=se(d,!1),O=V(V({},b),{},{fill:"none"},se(u,!1)),j=h.map(function(D,$){var B=o.getTickLineCoord(D),W=B.line,Z=B.tick,q=V(V(V(V({textAnchor:p,verticalAnchor:v},b),{},{stroke:"none",fill:m},A),Z),{},{index:$,payload:D,visibleTicksCount:h.length,tickFormatter:x});return S.createElement(Me,Se({className:"recharts-cartesian-axis-tick",key:"tick-".concat(D.value,"-").concat(D.coordinate,"-").concat(D.tickCoord)},gr(o.props,D,$)),u&&S.createElement("line",Se({},O,W,{className:me("recharts-cartesian-axis-tick-line",Nt(u,"className"))})),d&&t.renderTickItem(d,q,"".concat(ye(x)?x(D.value,$):D.value).concat(f||"")))});return S.createElement("g",{className:"recharts-cartesian-axis-ticks"},j)}},{key:"render",value:function(){var r=this,i=this.props,s=i.axisLine,o=i.width,c=i.height,u=i.ticksGenerator,m=i.className,d=i.hide;if(d)return null;var x=this.props,f=x.ticks,h=it(x,yn),p=f;return ye(u)&&(p=f&&f.length>0?u(this.props):u(h)),o<=0||c<=0||!p||!p.length?null:S.createElement(Me,{className:me("recharts-cartesian-axis",m),ref:function(b){r.layerReference=b}},s&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),vr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,s){var o,c=me(i.className,"recharts-cartesian-axis-tick-value");return S.isValidElement(r)?o=S.cloneElement(r,V(V({},i),{},{className:c})):ye(r)?o=r(V(V({},i),{},{className:c})):o=S.createElement(xr,Se({},i,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(z.Component);xt($e,"displayName","CartesianAxis");xt($e,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var On=["x1","y1","x2","y2","key"],Sn=["offset"];function ve(e){"@babel/helpers - typeof";return ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ve(e)}function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Lt(Object(n),!0).forEach(function(r){An(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function An(e,t,n){return t=Pn(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pn(e){var t=Dn(e,"string");return ve(t)=="symbol"?t:t+""}function Dn(e,t){if(ve(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ve(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ge.apply(this,arguments)}function Ft(e,t){if(e==null)return{};var n=_n(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _n(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var $n=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,i=t.x,s=t.y,o=t.width,c=t.height,u=t.ry;return S.createElement("rect",{x:i,y:s,ry:u,width:o,height:c,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Zt(e,t){var n;if(S.isValidElement(e))n=S.cloneElement(e,t);else if(ye(e))n=e(t);else{var r=t.x1,i=t.y1,s=t.x2,o=t.y2,c=t.key,u=Ft(t,On),m=se(u,!1);m.offset;var d=Ft(m,Sn);n=S.createElement("line",ge({},d,{x1:r,y1:i,x2:s,y2:o,fill:"none",key:c}))}return n}function Cn(e){var t=e.x,n=e.width,r=e.horizontal,i=r===void 0?!0:r,s=e.horizontalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(c,u){var m=U(U({},e),{},{x1:t,y1:c,x2:t+n,y2:c,key:"line-".concat(u),index:u});return Zt(i,m)});return S.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Tn(e){var t=e.y,n=e.height,r=e.vertical,i=r===void 0?!0:r,s=e.verticalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(c,u){var m=U(U({},e),{},{x1:c,y1:t,x2:c,y2:t+n,key:"line-".concat(u),index:u});return Zt(i,m)});return S.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function En(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,i=e.y,s=e.width,o=e.height,c=e.horizontalPoints,u=e.horizontal,m=u===void 0?!0:u;if(!m||!t||!t.length)return null;var d=c.map(function(f){return Math.round(f+i-i)}).sort(function(f,h){return f-h});i!==d[0]&&d.unshift(0);var x=d.map(function(f,h){var p=!d[h+1],v=p?i+o-f:d[h+1]-f;if(v<=0)return null;var b=h%t.length;return S.createElement("rect",{key:"react-".concat(h),y:f,x:r,height:v,width:s,stroke:"none",fill:t[b],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},x)}function Mn(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,i=e.fillOpacity,s=e.x,o=e.y,c=e.width,u=e.height,m=e.verticalPoints;if(!n||!r||!r.length)return null;var d=m.map(function(f){return Math.round(f+s-s)}).sort(function(f,h){return f-h});s!==d[0]&&d.unshift(0);var x=d.map(function(f,h){var p=!d[h+1],v=p?s+c-f:d[h+1]-f;if(v<=0)return null;var b=h%r.length;return S.createElement("rect",{key:"react-".concat(h),x:f,y:o,width:v,height:u,stroke:"none",fill:r[b],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},x)}var In=function(t,n){var r=t.xAxis,i=t.width,s=t.height,o=t.offset;return Vt(yt(U(U(U({},$e.defaultProps),r),{},{ticks:Ue(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.left,o.left+o.width,n)},zn=function(t,n){var r=t.yAxis,i=t.width,s=t.height,o=t.offset;return Vt(yt(U(U(U({},$e.defaultProps),r),{},{ticks:Ue(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.top,o.top+o.height,n)},ke={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Qt(e){var t,n,r,i,s,o,c=mt(),u=pt(),m=br(),d=U(U({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:ke.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:ke.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:ke.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:ke.horizontalFill,vertical:(s=e.vertical)!==null&&s!==void 0?s:ke.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:ke.verticalFill,x:te(e.x)?e.x:m.left,y:te(e.y)?e.y:m.top,width:te(e.width)?e.width:m.width,height:te(e.height)?e.height:m.height}),x=d.x,f=d.y,h=d.width,p=d.height,v=d.syncWithTicks,b=d.horizontalValues,A=d.verticalValues,O=wr(),j=jr();if(!te(h)||h<=0||!te(p)||p<=0||!te(x)||x!==+x||!te(f)||f!==+f)return null;var D=d.verticalCoordinatesGenerator||In,$=d.horizontalCoordinatesGenerator||zn,B=d.horizontalPoints,W=d.verticalPoints;if((!B||!B.length)&&ye($)){var Z=b&&b.length,q=$({yAxis:j?U(U({},j),{},{ticks:Z?b:j.ticks}):void 0,width:c,height:u,offset:m},Z?!0:v);kt(Array.isArray(q),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(ve(q),"]")),Array.isArray(q)&&(B=q)}if((!W||!W.length)&&ye(D)){var ne=A&&A.length,Q=D({xAxis:O?U(U({},O),{},{ticks:ne?A:O.ticks}):void 0,width:c,height:u,offset:m},ne?!0:v);kt(Array.isArray(Q),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(ve(Q),"]")),Array.isArray(Q)&&(W=Q)}return S.createElement("g",{className:"recharts-cartesian-grid"},S.createElement($n,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),S.createElement(Cn,ge({},d,{offset:m,horizontalPoints:B,xAxis:O,yAxis:j})),S.createElement(Tn,ge({},d,{offset:m,verticalPoints:W,xAxis:O,yAxis:j})),S.createElement(En,ge({},d,{horizontalPoints:B})),S.createElement(Mn,ge({},d,{verticalPoints:W})))}Qt.displayName="CartesianGrid";var Ln=["type","layout","connectNulls","ref"],Fn=["key"];function Pe(e){"@babel/helpers - typeof";return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pe(e)}function Rt(e,t){if(e==null)return{};var n=Rn(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Rn(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Ie(){return Ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ie.apply(this,arguments)}function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bt(Object(n),!0).forEach(function(r){re(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Oe(e){return Vn(e)||Gn(e)||Wn(e)||Bn()}function Bn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wn(e,t){if(e){if(typeof e=="string")return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lt(e,t)}}function Gn(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Vn(e){if(Array.isArray(e))return lt(e)}function lt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tr(r.key),r)}}function Kn(e,t,n){return t&&Wt(e.prototype,t),n&&Wt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hn(e,t,n){return t=Ye(t),Un(e,er()?Reflect.construct(t,n||[],Ye(e).constructor):t.apply(e,n))}function Un(e,t){if(t&&(Pe(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xn(e)}function Xn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function er(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(er=function(){return!!e})()}function Ye(e){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ye(e)}function qn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ct(e,t)}function ct(e,t){return ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ct(e,t)}function re(e,t,n){return t=tr(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tr(e){var t=Jn(e,"string");return Pe(t)=="symbol"?t:t+""}function Jn(e,t){if(Pe(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Pe(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var pe=function(e){function t(){var n;Yn(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Hn(this,t,[].concat(i)),re(n,"state",{isAnimationFinished:!0,totalLength:0}),re(n,"generateSimpleStrokeDasharray",function(o,c){return"".concat(c,"px ").concat(o-c,"px")}),re(n,"getStrokeDasharray",function(o,c,u){var m=u.reduce(function(A,O){return A+O});if(!m)return n.generateSimpleStrokeDasharray(c,o);for(var d=Math.floor(o/m),x=o%m,f=c-o,h=[],p=0,v=0;p<u.length;v+=u[p],++p)if(v+u[p]>x){h=[].concat(Oe(u.slice(0,p)),[x-v]);break}var b=h.length%2===0?[0,f]:[f];return[].concat(Oe(t.repeat(u,d)),Oe(h),b).map(function(A){return"".concat(A,"px")}).join(", ")}),re(n,"id",$r("recharts-line-")),re(n,"pathRef",function(o){n.mainCurve=o}),re(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),re(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return qn(t,e),Kn(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,c=s.xAxis,u=s.yAxis,m=s.layout,d=s.children,x=kr(d,Or);if(!x)return null;var f=function(v,b){return{x:v.x,y:v.y,value:v.value,errorVal:Yt(v.payload,b)}},h={clipPath:r?"url(#clipPath-".concat(i,")"):null};return S.createElement(Me,h,x.map(function(p){return S.cloneElement(p,{key:"bar-".concat(p.props.dataKey),data:o,xAxis:c,yAxis:u,layout:m,dataPointFormatter:f})}))}},{key:"renderDots",value:function(r,i,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var c=this.props,u=c.dot,m=c.points,d=c.dataKey,x=se(this.props,!1),f=se(u,!0),h=m.map(function(v,b){var A=J(J(J({key:"dot-".concat(b),r:3},x),f),{},{index:b,cx:v.x,cy:v.y,value:v.value,dataKey:d,payload:v.payload,points:m});return t.renderDotItem(u,A)}),p={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return S.createElement(Me,Ie({className:"recharts-line-dots",key:"dots"},p),h)}},{key:"renderCurveStatically",value:function(r,i,s,o){var c=this.props,u=c.type,m=c.layout,d=c.connectNulls;c.ref;var x=Rt(c,Ln),f=J(J(J({},se(x,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:r},o),{},{type:u,layout:m,connectNulls:d});return S.createElement(Sr,Ie({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var s=this,o=this.props,c=o.points,u=o.strokeDasharray,m=o.isAnimationActive,d=o.animationBegin,x=o.animationDuration,f=o.animationEasing,h=o.animationId,p=o.animateNewValues,v=o.width,b=o.height,A=this.state,O=A.prevPoints,j=A.totalLength;return S.createElement(Ar,{begin:d,duration:x,isActive:m,easing:f,from:{t:0},to:{t:1},key:"line-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(D){var $=D.t;if(O){var B=O.length/c.length,W=c.map(function(X,Ce){var ce=Math.floor(Ce*B);if(O[ce]){var ue=O[ce],ae=Ee(ue.x,X.x),Le=Ee(ue.y,X.y);return J(J({},X),{},{x:ae($),y:Le($)})}if(p){var we=Ee(v*2,X.x),Fe=Ee(b/2,X.y);return J(J({},X),{},{x:we($),y:Fe($)})}return J(J({},X),{},{x:X.x,y:X.y})});return s.renderCurveStatically(W,r,i)}var Z=Ee(0,j),q=Z($),ne;if(u){var Q="".concat(u).split(/[,\s]+/gim).map(function(X){return parseFloat(X)});ne=s.getStrokeDasharray(q,j,Q)}else ne=s.generateSimpleStrokeDasharray(j,q);return s.renderCurveStatically(c,r,i,{strokeDasharray:ne})})}},{key:"renderCurve",value:function(r,i){var s=this.props,o=s.points,c=s.isAnimationActive,u=this.state,m=u.prevPoints,d=u.totalLength;return c&&o&&o.length&&(!m&&d>0||!Pr(m,o))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(o,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,o=i.dot,c=i.points,u=i.className,m=i.xAxis,d=i.yAxis,x=i.top,f=i.left,h=i.width,p=i.height,v=i.isAnimationActive,b=i.id;if(s||!c||!c.length)return null;var A=this.state.isAnimationFinished,O=c.length===1,j=me("recharts-line",u),D=m&&m.allowDataOverflow,$=d&&d.allowDataOverflow,B=D||$,W=st(b)?this.id:b,Z=(r=se(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},q=Z.r,ne=q===void 0?3:q,Q=Z.strokeWidth,X=Q===void 0?2:Q,Ce=Dr(o)?o:{},ce=Ce.clipDot,ue=ce===void 0?!0:ce,ae=ne*2+X;return S.createElement(Me,{className:j},D||$?S.createElement("defs",null,S.createElement("clipPath",{id:"clipPath-".concat(W)},S.createElement("rect",{x:D?f:f-h/2,y:$?x:x-p/2,width:D?h:h*2,height:$?p:p*2})),!ue&&S.createElement("clipPath",{id:"clipPath-dots-".concat(W)},S.createElement("rect",{x:f-ae/2,y:x-ae/2,width:h+ae,height:p+ae}))):null,!O&&this.renderCurve(B,W),this.renderErrorBar(B,W),(O||o)&&this.renderDots(B,ue,W),(!v||A)&&_r.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var s=r.length%2!==0?[].concat(Oe(r),[0]):r,o=[],c=0;c<i;++c)o=[].concat(Oe(o),Oe(s));return o}},{key:"renderDotItem",value:function(r,i){var s;if(S.isValidElement(r))s=S.cloneElement(r,i);else if(ye(r))s=r(i);else{var o=i.key,c=Rt(i,Fn),u=me("recharts-line-dot",typeof r!="boolean"?r.className:"");s=S.createElement(Nr,Ie({key:o},c,{className:u}))}return s}}])}(z.PureComponent);re(pe,"displayName","Line");re(pe,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Gt.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});re(pe,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,i=e.xAxisTicks,s=e.yAxisTicks,o=e.dataKey,c=e.bandSize,u=e.displayedData,m=e.offset,d=t.layout,x=u.map(function(f,h){var p=Yt(f,o);return d==="horizontal"?{x:Ot({axis:n,ticks:i,bandSize:c,entry:f,index:h}),y:st(p)?null:r.scale(p),value:p,payload:f}:{x:st(p)?null:n.scale(p),y:Ot({axis:r,ticks:s,bandSize:c,entry:f,index:h}),value:p,payload:f}});return J({points:x,layout:d},m)});function De(e){"@babel/helpers - typeof";return De=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},De(e)}function Zn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ar(r.key),r)}}function ea(e,t,n){return t&&Qn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ta(e,t,n){return t=Ke(t),ra(e,rr()?Reflect.construct(t,n||[],Ke(e).constructor):t.apply(e,n))}function ra(e,t){if(t&&(De(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return na(e)}function na(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rr=function(){return!!e})()}function Ke(e){return Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ke(e)}function aa(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ut(e,t)}function ut(e,t){return ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ut(e,t)}function nr(e,t,n){return t=ar(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ar(e){var t=ia(e,"string");return De(t)=="symbol"?t:t+""}function ia(e,t){if(De(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(De(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function dt(){return dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dt.apply(this,arguments)}function sa(e){var t=e.xAxisId,n=mt(),r=pt(),i=Cr(t);return i==null?null:z.createElement($e,dt({},i,{className:me("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return Ue(o,!0)}}))}var Xe=function(e){function t(){return Zn(this,t),ta(this,t,arguments)}return aa(t,e),ea(t,[{key:"render",value:function(){return z.createElement(sa,this.props)}}])}(z.Component);nr(Xe,"displayName","XAxis");nr(Xe,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function _e(e){"@babel/helpers - typeof";return _e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_e(e)}function oa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function la(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,or(r.key),r)}}function ca(e,t,n){return t&&la(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ua(e,t,n){return t=He(t),da(e,ir()?Reflect.construct(t,n||[],He(e).constructor):t.apply(e,n))}function da(e,t){if(t&&(_e(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fa(e)}function fa(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ir(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ir=function(){return!!e})()}function He(e){return He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},He(e)}function ha(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ft(e,t)}function ft(e,t){return ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ft(e,t)}function sr(e,t,n){return t=or(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function or(e){var t=ma(e,"string");return _e(t)=="symbol"?t:t+""}function ma(e,t){if(_e(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(_e(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ht(){return ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ht.apply(this,arguments)}var pa=function(t){var n=t.yAxisId,r=mt(),i=pt(),s=Tr(n);return s==null?null:z.createElement($e,ht({},s,{className:me("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(c){return Ue(c,!0)}}))},qe=function(e){function t(){return oa(this,t),ua(this,t,arguments)}return ha(t,e),ca(t,[{key:"render",value:function(){return z.createElement(pa,this.props)}}])}(z.Component);sr(qe,"displayName","YAxis");sr(qe,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var ya=Er({chartName:"LineChart",GraphicalChild:pe,axisComponents:[{axisType:"xAxis",AxisComp:Xe},{axisType:"yAxis",AxisComp:qe}],formatAxisMap:Mr});const xa=({isOpen:e,onClose:t})=>e?a.jsx("div",{className:"fixed inset-0 z-[70] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t}),a.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full sm:p-6",children:[a.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:a.jsxs("button",{type:"button",className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:t,children:[a.jsx("span",{className:"sr-only",children:"Close"}),a.jsx(Kt,{className:"h-6 w-6"})]})}),a.jsx("div",{className:"sm:flex sm:items-start",children:a.jsxs("div",{className:"mt-3 sm:mt-0 sm:ml-4 w-full text-left",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",id:"modal-title",children:"Metric Bowler User Guide"}),a.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(tn,{className:"h-5 w-5 text-blue-500"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Editing Data"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Left click on any Target or Actual cell to edit its value. Right click to add a context note. Cells with notes are marked with a red triangle."})]})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(qr,{className:"h-5 w-5 text-blue-500"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Target Rules"}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Set rules in the Edit Metric window: ",">="," Target (default), ","<="," Target, or Within Range (e.g. {5,10}). Actual values violating the rule will be highlighted in red."]})]})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(nn,{className:"h-5 w-5 text-blue-500"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Bowler Info & Status Rules"}),a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Double-click on the Bowler Name or Description in the header to edit the Bowler information."}),a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"The sidebar color indicator reflects the bowler's status:"}),a.jsxs("ul",{className:"list-none space-y-1 text-sm text-gray-500",children:[a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),a.jsxs("span",{children:[a.jsx("strong",{className:"text-gray-700",children:"Green:"})," All metrics met targets in the latest month."]})]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full mr-2"}),a.jsxs("span",{children:[a.jsx("strong",{className:"text-gray-700",children:"Red:"})," Any metric failed for 3 consecutive months."]})]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full mr-2"}),a.jsxs("span",{children:[a.jsx("strong",{className:"text-gray-700",children:"Yellow:"})," Any metric missed target in latest month or last 2 months."]})]})]})]})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Ht,{className:"h-5 w-5 text-blue-500"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"AI Analysis"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Click the Sparkles icon on any chart to get an AI-powered analysis of the metric's performance trend."})]})]})]})]})}),a.jsx("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:a.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:t,children:"Got it"})})]})]})}):null,ga=({isOpen:e,onClose:t,result:n,metricName:r})=>{if(!e||!n)return null;const i=()=>{switch(n.trend){case"capable":return a.jsx(Qr,{className:"w-6 h-6 text-green-600"});case"improving":return a.jsx(St,{className:"w-6 h-6 text-green-600"});case"degrading":return a.jsx(Et,{className:"w-6 h-6 text-red-600"});case"stable":return a.jsx(Tt,{className:"w-6 h-6 text-blue-600"});case"unstable":return a.jsx($t,{className:"w-6 h-6 text-orange-600"});case"incapable":return a.jsx(zr,{className:"w-6 h-6 text-red-600"});case"increasing":return a.jsx(St,{className:"w-6 h-6 text-green-600"});case"decreasing":return a.jsx(Et,{className:"w-6 h-6 text-red-600"});case"fluctuating":return a.jsx($t,{className:"w-6 h-6 text-orange-600"});default:return a.jsx(Tt,{className:"w-6 h-6 text-gray-600"})}},s=()=>n.trend.charAt(0).toUpperCase()+n.trend.slice(1);return a.jsx("div",{className:"fixed inset-0 z-[70] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t}),a.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full sm:p-6",children:[a.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:a.jsxs("button",{type:"button",className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:t,children:[a.jsx("span",{className:"sr-only",children:"Close"}),a.jsx(Kt,{className:"h-6 w-6","aria-hidden":"true"})]})}),a.jsx("div",{className:"sm:flex sm:items-start",children:a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[a.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:["AI Analysis: ",r]}),a.jsxs("div",{className:"mt-4 space-y-6",children:[a.jsxs("div",{className:"bg-blue-50 p-4 rounded-md",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Summary"}),a.jsx("p",{className:"text-sm text-blue-700",children:n.summary})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-md flex flex-col items-center justify-center",children:[a.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-2",children:"Trend"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[i(),a.jsx("span",{className:"text-sm font-semibold text-gray-900",children:s()})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-md flex flex-col items-center justify-center",children:[a.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-2",children:"Target Achievement"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ir,{className:`w-5 h-5 ${n.achievementRate>=80?"text-green-500":n.achievementRate>=50?"text-yellow-500":"text-red-500"}`}),a.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[n.achievementRate.toFixed(1),"%"]})]})]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-2 flex items-center",children:[a.jsx(Jr,{className:"w-4 h-4 mr-1 text-orange-500"}),"Suggestions"]}),n.suggestion.length>0?a.jsx("ul",{className:"text-sm text-gray-600 space-y-2 bg-orange-50 p-3 rounded-md border border-orange-100",children:n.suggestion.map((o,c)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"mr-2",children:"•"}),a.jsx("span",{children:o})]},c))}):a.jsx("p",{className:"text-sm text-gray-500 italic",children:"No specific suggestions detected."})]})]})]})}),a.jsx("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:a.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:t,children:"Close"})})]})]})})},va=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ba=e=>{const{cx:t,cy:n,payload:r}=e;return t===void 0||n===void 0||isNaN(t)||isNaN(n)||r.actual===null||r.actual===void 0?null:Ut(r.rule,r.rawTarget,r.rawActual)?a.jsx("circle",{cx:t,cy:n,r:5,fill:"#dc2626",stroke:"#fff",strokeWidth:2}):a.jsx("circle",{cx:t,cy:n,r:3,fill:"#3b82f6",strokeWidth:0})},Oa=()=>{const{id:e}=Lr(),t=Fr(),{bowlers:n,updateBowler:r,selectedModel:i,a3Cases:s,addA3Case:o}=Rr(),c=Br(),[u,m]=z.useState(()=>`${new Date().getFullYear()}-04`),[d,x]=z.useState(()=>{const N=new Date().getFullYear(),y=3,w=new Date(N,y+11,1);return`${w.getFullYear()}-${String(w.getMonth()+1).padStart(2,"0")}`}),[f,h]=z.useState(!1),[p,v]=z.useState({}),[b,A]=z.useState({}),[O,j]=z.useState(!1),[D,$]=z.useState(""),[B,W]=z.useState(""),[Z,q]=z.useState(null),[ne,Q]=z.useState(!1),[X,Ce]=z.useState(""),[ce,ue]=z.useState({}),[ae,Le]=z.useState({}),[we,Fe]=z.useState(null),de=z.useMemo(()=>{const[l,N]=u.split("-"),y=parseInt(l,10),w=parseInt(N,10)-1,[P,E]=d.split("-"),L=parseInt(P,10),g=parseInt(E,10)-1,k=(L-y)*12+(g-w)+1,I=[];if(k>0)for(let M=0;M<k;M++){const R=new Date(y,w+M,1),T=R.getMonth(),_=R.getFullYear(),Y=va[T],K=`${_}-${String(T+1).padStart(2,"0")}`,G=`${_}/${Y}`;I.push({key:K,label:G})}return I},[u,d]),C=n.find(l=>l.id===e),lr=C?C.name:"Metric Bowler",ie=(C==null?void 0:C.metrics)||[];z.useEffect(()=>{if(C!=null&&C.metricStartDate){m(C.metricStartDate);const[l,N]=C.metricStartDate.split("-"),y=parseInt(l,10),w=parseInt(N,10)-1;if(!isNaN(y)&&!isNaN(w)){const P=new Date(y,w+11,1);x(`${P.getFullYear()}-${String(P.getMonth()+1).padStart(2,"0")}`)}}},[C==null?void 0:C.metricStartDate]);const gt=l=>{m(l),C&&r({...C,metricStartDate:l})},vt=l=>{x(l)},Je=()=>{C&&r({...C,name:D,description:B}),j(!1)},cr=async l=>{ue(N=>({...N,[l.id]:!0}));try{const N=s.filter(w=>(w.linkedMetricIds||[]).includes(l.id)),y=await Ct(l,i,N);q(y),Ce(l.name),Q(!0)}catch(N){console.error("Analysis failed",N)}finally{ue(N=>({...N,[l.id]:!1}))}},ur=async l=>{if(!ae[l.id]){Le(N=>({...N,[l.id]:!0}));try{const N=s.filter(F=>(F.linkedMetricIds||[]).includes(l.id)),y=await Ct(l,i,N),w=await Zr(l,i),P=at(new Date),E=y.trend.charAt(0).toUpperCase()+y.trend.slice(1);let L="Medium";const g=y.trend.toLowerCase();g==="degrading"||g==="unstable"||g==="incapable"||y.achievementRate<50?L="High":y.achievementRate>=80&&(g==="capable"||g==="improving"||g==="stable")&&(L="Low");const k=n.find(F=>(F.metrics||[]).some(je=>je.id===l.id)),I=l.owner||(k==null?void 0:k.champion)||"",M=(k==null?void 0:k.group)||"",R=(k==null?void 0:k.tag)||"",T=typeof y.achievementRate=="number"?`${y.achievementRate.toFixed(1)}%`:"",_=[];y.summary&&_.push(y.summary.trim()),T&&_.push(`Current target achievement: ${T}.`);const Y=_.join(`

`),K=w.rootCauses.length?`Most likely root causes:
- ${w.rootCauses.join(`
- `)}`:"",G=[],ee="root",fe=w.problemStatement&&w.problemStatement.trim().length>0?w.problemStatement.trim():`Improve performance of metric "${l.name}".`;G.push({id:ee,text:fe,x:50,y:220,parentId:null,type:"root"});const oe=(F,je,Qe,Be,et)=>{let xe=et;const he=120,Ne=220;return je.forEach(le=>{if(!le.cause)return;const We=Dt();F.push({id:We,text:le.cause,x:50+Ne*Be,y:xe,parentId:Qe,type:"child"}),le.children&&le.children.length>0?xe=oe(F,le.children,We,Be+1,xe+he):xe+=he}),xe};w.whyTree&&w.whyTree.length>0&&oe(G,w.whyTree,ee,1,260);const Te=[],Re=new Date;(Array.isArray(w.actions)&&w.actions.length>0?w.actions:[]).forEach((F,je)=>{const Qe=F.name||`Action ${je+1}`,Be=F.description||"",et=F.owner||I,xe=F.group||void 0;let he,Ne;if(F.startDate&&!Number.isNaN(Date.parse(F.startDate))&&(he=F.startDate),F.endDate&&!Number.isNaN(Date.parse(F.endDate))&&(Ne=F.endDate),!he){const tt=_t(Re,je*7);he=at(tt)}if(!Ne){const tt=new Date(he),mr=_t(tt,7);Ne=at(mr)}const le=F.status,We=le==="In Progress"||le==="Completed"?le:"Not Started",hr=typeof F.progress=="number"&&isFinite(F.progress)&&F.progress>=0&&F.progress<=100?F.progress:0;Te.push({id:Dt(),name:Qe,description:Be,owner:et,group:xe,startDate:he,endDate:Ne,status:We,progress:hr})});const fr=o({title:`A3: ${l.name} – ${E}`,description:Y,owner:I,group:M,tag:R,linkedMetricIds:[l.id],priority:L,startDate:P,endDate:"",status:"In Progress",problemStatement:w.problemStatement||fe,results:"",mindMapNodes:G,mindMapText:"",rootCause:K,actionPlanTasks:Te,dataAnalysisObservations:"",dataAnalysisImages:[],dataAnalysisCanvasHeight:void 0,resultImages:[],resultCanvasHeight:void 0});c.success("Created new A3 case from AI insight."),t(`/a3-analysis/${fr.id}`)}catch(N){console.error("Failed to create A3 from AI",N),c.error("Failed to create A3 from AI. Please try again.")}finally{Le(N=>({...N,[l.id]:!1}))}}},bt=(l,N,y,w)=>{var L,g,k,I,M,R;if(!C)return;const P=ie.find(T=>T.id===l);if(P&&y==="target"&&P.targetMeetingRule==="within_range"){const T=w.match(/^(?:\{|\[)?\s*(-?[\d.]+)\s*,\s*(-?[\d.]+)\s*(?:\}|\])?$/);if(!T){c.error("Invalid format: Target must be {min, max} (e.g., {5, 10})");const K=`cell-${l}-${N}-target`,G=document.getElementById(K);G&&(G.value=((g=(L=P.monthlyData)==null?void 0:L[N])==null?void 0:g.target)||"");return}const _=parseFloat(T[1]),Y=parseFloat(T[2]);if(isNaN(_)||isNaN(Y)){c.error("Invalid numbers: Target must contain valid numbers");const K=`cell-${l}-${N}-target`,G=document.getElementById(K);G&&(G.value=((I=(k=P.monthlyData)==null?void 0:k[N])==null?void 0:I.target)||"");return}if(_>=Y){c.error("Invalid range: Min value must be strictly smaller than Max value");const K=`cell-${l}-${N}-target`,G=document.getElementById(K);G&&(G.value=((R=(M=P.monthlyData)==null?void 0:M[N])==null?void 0:R.target)||"");return}}const E=ie.map(T=>{if(T.id!==l)return T;const _=T.monthlyData||{},Y=_[N]||{target:"",actual:""};return Y[y]===w?T:{...T,monthlyData:{..._,[N]:{...Y,[y]:w}}}});JSON.stringify(E)!==JSON.stringify(ie)&&r({...C,metrics:E})},dr=(l,N,y,w)=>{if(!C)return;const P=ie.map(E=>{if(E.id!==l)return E;const L=E.monthlyData||{},g=L[N]||{target:"",actual:""};return{...E,monthlyData:{...L,[N]:{...g,[y]:w}}}});r({...C,metrics:P})},wt=(l,N,y,w,P)=>{l.preventDefault();const E=prompt("Enter note for this cell:",P);E!==null&&dr(N,y,w==="target"?"targetNote":"actualNote",E)},jt=(l,N,y,w)=>{if(l.key==="ArrowUp"||l.key==="ArrowDown"||l.key==="ArrowLeft"||l.key==="ArrowRight"){l.preventDefault();let P=y,E=N,L=w;l.key==="ArrowUp"?N==="actual"?E="target":(E="actual",P=Math.max(0,y-1)):l.key==="ArrowDown"?N==="target"?E="actual":(E="target",P=Math.min(ie.length-1,y+1)):l.key==="ArrowLeft"?L=Math.max(0,w-1):l.key==="ArrowRight"&&(L=Math.min(de.length-1,w+1));const g=ie[P],k=de[L],I=`cell-${g.id}-${k.key}-${E}`,M=document.getElementById(I);M&&(M.focus(),M.select())}else l.key==="Enter"&&l.target.blur()};return!e&&n.length>0?a.jsx(Wr,{to:`/metric-bowler/${n[0].id}`,replace:!0}):a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"px-6 py-5 border-b border-gray-200 bg-white flex justify-between items-center",children:[a.jsx("div",{onDoubleClick:()=>{C&&($(C.name),W(C.description||""),j(!0))},className:"flex-1 mr-4",children:O?a.jsxs("div",{className:"flex flex-col space-y-2 max-w-md",onBlur:l=>{l.currentTarget.contains(l.relatedTarget)||Je()},children:[a.jsx("input",{type:"text",value:D,onChange:l=>$(l.target.value),onKeyDown:l=>l.key==="Enter"&&Je(),className:"text-xl font-semibold text-gray-900 border-b border-gray-300 focus:border-blue-500 outline-none",autoFocus:!0}),a.jsx("input",{type:"text",value:B,onChange:l=>W(l.target.value),onKeyDown:l=>l.key==="Enter"&&Je(),className:"text-sm text-gray-500 border-b border-gray-300 focus:border-blue-500 outline-none w-full",placeholder:"Description"})]}):a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900 cursor-pointer hover:text-blue-600 transition-colors",title:"Double-click to edit",children:lr}),a.jsx("p",{className:"hidden md:block text-sm text-gray-500 mt-1 cursor-pointer hover:text-gray-700",title:"Double-click to edit",children:(C==null?void 0:C.description)||"Track key performance indicators and monthly targets."})]})}),a.jsxs("div",{className:"text-right flex flex-col items-end",children:[(C==null?void 0:C.champion)&&a.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Champion: ",C.champion]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>h(!0),className:"inline-flex items-center p-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",title:"Help Guide",children:a.jsx(en,{className:"h-4 w-4"})}),a.jsxs("div",{className:"hidden sm:flex items-center space-x-2",children:[a.jsx("input",{type:"month",id:"startDate",value:u,onChange:l=>gt(l.target.value),className:"block rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-1 border",title:"Start Date"}),a.jsx("span",{className:"text-gray-400",children:"-"}),a.jsx("input",{type:"month",id:"stopDate",value:d,onChange:l=>vt(l.target.value),className:"block rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-1 border",title:"Stop Date"})]}),a.jsxs("div",{className:"flex sm:hidden items-center space-x-1",children:[a.jsxs("label",{className:"relative inline-flex items-center",children:[a.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 bg-white text-gray-700 shadow-sm",children:a.jsx(At,{className:"w-4 h-4"})}),a.jsx("input",{type:"month",value:u,onChange:l=>gt(l.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",title:"Start Date"})]}),a.jsx("span",{className:"text-gray-400",children:"-"}),a.jsxs("label",{className:"relative inline-flex items-center",children:[a.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 bg-white text-gray-700 shadow-sm",children:a.jsx(At,{className:"w-4 h-4"})}),a.jsx("input",{type:"month",value:d,onChange:l=>vt(l.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",title:"Stop Date"})]})]})]})]})]}),a.jsx("div",{className:"overflow-x-auto overflow-y-hidden no-scrollbar",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-auto",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider sticky left-0 bg-gray-50 z-10 border-r border-gray-200 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)] w-48",children:"Metric Name"}),a.jsx("th",{scope:"col",className:"px-2 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider w-24 border-r border-gray-200",children:"Scope"}),a.jsx("th",{scope:"col",className:"px-2 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider w-20 border-r border-gray-200",children:"Type"}),de.map(l=>a.jsx("th",{scope:"col",className:"px-1 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider text-gray-400 whitespace-normal break-words min-w-[3rem] border-r border-gray-200",children:l.label.replace("/"," ")},l.key))]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ie.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:3+de.length,className:"px-6 py-10 text-center text-gray-500 italic",children:"No metrics added yet. Use the + button to add metrics."})}):ie.map((l,N)=>a.jsxs(a.Fragment,{children:[a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors border-b-0",children:[a.jsx("td",{rowSpan:2,className:"px-4 py-4 text-sm font-medium text-gray-900 sticky left-0 bg-white z-10 hover:z-[60] border-r border-gray-200 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)] group-hover:bg-gray-50 align-top break-words",children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{className:"flex flex-col",children:a.jsxs("div",{className:"flex items-center flex-wrap",children:[a.jsx("span",{className:"mr-2",children:l.name}),a.jsx("div",{className:"inline-block",onMouseEnter:y=>{const w=y.currentTarget.getBoundingClientRect();Fe({x:w.right+8,y:w.top,content:a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"font-semibold mb-1",children:"Definition:"}),a.jsx("p",{className:"mb-2",children:l.definition||"N/A"}),a.jsx("p",{className:"font-semibold mb-1",children:"Owner:"}),a.jsx("p",{className:"mb-2",children:l.owner||"N/A"}),a.jsx("p",{className:"font-semibold mb-1",children:"Attribute:"}),a.jsx("p",{children:l.attribute||"N/A"})]})})},onMouseLeave:()=>Fe(null),children:a.jsx(Vr,{className:"w-3.5 h-3.5 text-gray-400 hover:text-blue-500 cursor-help"})})]})})})}),a.jsx("td",{rowSpan:2,className:"px-2 py-4 whitespace-nowrap text-xs text-gray-700 bg-white border-r border-gray-200 border-b-0 align-top",children:l.scope||"-"}),a.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-xs font-medium text-gray-500 bg-gray-50/30 border-b border-gray-100 h-8",children:"Target"}),de.map((y,w)=>{var P,E,L,g,k,I;return a.jsxs("td",{className:"px-0 py-0 whitespace-nowrap text-xs text-gray-500 bg-gray-50/30 border-b border-r border-gray-100 h-8 p-0 relative group/cell",onContextMenu:M=>{var R,T;return wt(M,l.id,y.key,"target",((T=(R=l.monthlyData)==null?void 0:R[y.key])==null?void 0:T.targetNote)||"")},children:[a.jsx("input",{id:`cell-${l.id}-${y.key}-target`,type:"text",className:"w-full h-full bg-transparent text-center focus:outline-none focus:bg-white focus:ring-2 focus:ring-inset focus:ring-blue-500 px-1 min-w-[3rem]",defaultValue:((E=(P=l.monthlyData)==null?void 0:P[y.key])==null?void 0:E.target)||"",onBlur:M=>bt(l.id,y.key,"target",M.target.value),onKeyDown:M=>jt(M,"target",N,w),title:((g=(L=l.monthlyData)==null?void 0:L[y.key])==null?void 0:g.targetNote)||""}),((I=(k=l.monthlyData)==null?void 0:k[y.key])==null?void 0:I.targetNote)&&a.jsx("div",{className:"absolute top-0 right-0 w-0 h-0 border-t-[6px] border-l-[6px] border-t-red-500 border-l-transparent pointer-events-none"})]},`${y.key}-target`)})]},`${l.id}-row1`),a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-xs font-medium text-gray-500 h-8 border-b border-r border-gray-100",children:"Actual"}),de.map((y,w)=>{var E,L,g,k,I,M,R,T,_,Y,K,G;const P=Ut(l.targetMeetingRule,(L=(E=l.monthlyData)==null?void 0:E[y.key])==null?void 0:L.target,(k=(g=l.monthlyData)==null?void 0:g[y.key])==null?void 0:k.actual);return a.jsxs("td",{className:"px-0 py-0 whitespace-nowrap text-xs text-gray-500 h-8 p-0 relative group/cell border-b border-r border-gray-100",onContextMenu:ee=>{var fe,oe;return wt(ee,l.id,y.key,"actual",((oe=(fe=l.monthlyData)==null?void 0:fe[y.key])==null?void 0:oe.actualNote)||"")},children:[a.jsx("input",{id:`cell-${l.id}-${y.key}-actual`,type:"text",className:`w-full h-full bg-transparent text-center focus:outline-none focus:bg-white focus:ring-2 focus:ring-inset focus:ring-blue-500 px-1 min-w-[3rem] ${(M=(I=l.monthlyData)==null?void 0:I[y.key])!=null&&M.actual?P?"text-red-600 font-bold bg-red-50":"text-gray-900 font-semibold":"text-gray-400"}`,defaultValue:((T=(R=l.monthlyData)==null?void 0:R[y.key])==null?void 0:T.actual)||"",onBlur:ee=>bt(l.id,y.key,"actual",ee.target.value),onKeyDown:ee=>jt(ee,"actual",N,w),title:((Y=(_=l.monthlyData)==null?void 0:_[y.key])==null?void 0:Y.actualNote)||""}),((G=(K=l.monthlyData)==null?void 0:K[y.key])==null?void 0:G.actualNote)&&a.jsx("div",{className:"absolute top-0 right-0 w-0 h-0 border-t-[6px] border-l-[6px] border-t-red-500 border-l-transparent pointer-events-none"})]},`${y.key}-actual`)})]},`${l.id}-row2`)]}))})]})}),ie.length>0&&a.jsxs("div",{className:"p-6 bg-gray-50 border-t border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Metric Trends"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:ie.map(l=>{const N=de.map(g=>{var K,G,ee,fe;const k=(G=(K=l.monthlyData)==null?void 0:K[g.key])==null?void 0:G.target,I=(fe=(ee=l.monthlyData)==null?void 0:ee[g.key])==null?void 0:fe.actual;let M=null,R=null,T=null;if(k){const oe=k.match(/^(?:\{|\[)?\s*(-?[\d.]+)\s*,\s*(-?[\d.]+)\s*(?:\}|\])?$/);if(oe){const Re=parseFloat(oe[1]),Ze=parseFloat(oe[2]);!isNaN(Re)&&!isNaN(Ze)&&(R=Re,T=Ze)}const Te=parseFloat(k);isNaN(Te)||(M=Te)}const _=I?parseFloat(I):NaN,Y=isNaN(_)?null:_;return{name:g.label.split("/")[1],fullLabel:g.label,target:M,minTarget:R,maxTarget:T,actual:Y,rule:l.targetMeetingRule,rawTarget:k,rawActual:I}}),y=(s||[]).filter(g=>(g.linkedMetricIds||[]).includes(l.id)&&g.endDate).map(g=>{const[k,I]=(g.endDate||"").split("-"),M=parseInt(k,10),R=parseInt(I||"",10);if(isNaN(M)||isNaN(R))return null;const T=`${M}-${String(R).padStart(2,"0")}`,_=de.find(K=>K.key===T);return _?{x:_.label.split("/")[1],title:g.title||"Untitled A3",endDate:g.endDate}:null}).filter(g=>!!g),w={};y.forEach(g=>{w[g.x]||(w[g.x]=[]),w[g.x].push({title:g.title,endDate:g.endDate})});const P=b[l.id]||{min:"",max:""},E=p[l.id]||!1,L=[P.min!==""&&!isNaN(parseFloat(P.min))?parseFloat(P.min):"auto",P.max!==""&&!isNaN(parseFloat(P.max))?parseFloat(P.max):"auto"];return a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:l.name}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:()=>cr(l),disabled:ce[l.id],className:"p-1 rounded-md transition-colors text-blue-500 hover:text-blue-700 hover:bg-blue-50 disabled:opacity-50",title:"AI Analysis",children:ce[l.id]?a.jsx(Pt,{className:"w-4 h-4 animate-spin"}):a.jsx(Ht,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>v(g=>({...g,[l.id]:!g[l.id]})),className:`p-1 rounded-md transition-colors ${E?"bg-gray-100 text-blue-600":"text-gray-400 hover:text-gray-600"}`,title:"Adjust Scale",children:a.jsx(rn,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>ur(l),disabled:ae[l.id],className:"p-1 rounded-md transition-colors text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50 disabled:opacity-50",title:"Create A3 with AI",children:ae[l.id]?a.jsx(Pt,{className:"w-4 h-4 animate-spin"}):a.jsx(Yr,{className:"w-4 h-4"})})]})]}),E&&a.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-md text-xs",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"font-medium text-gray-600",children:"Y-Axis Scale:"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-gray-500",children:"Min:"}),a.jsx("input",{type:"number",className:"w-20 p-1 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500",placeholder:"Auto",value:P.min,onChange:g=>A(k=>({...k,[l.id]:{...k[l.id],min:g.target.value}}))})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-gray-500",children:"Max:"}),a.jsx("input",{type:"number",className:"w-20 p-1 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500",placeholder:"Auto",value:P.max,onChange:g=>A(k=>({...k,[l.id]:{...k[l.id],max:g.target.value}}))})]})]})}),a.jsx("div",{className:"h-64 w-full",children:a.jsx(Kr,{width:"100%",height:"100%",children:a.jsxs(ya,{data:N,margin:{top:5,right:20,bottom:5,left:0},children:[a.jsx(Qt,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),a.jsx(Xe,{dataKey:"name",tick:{fontSize:10,fill:"#6b7280"},axisLine:!1,tickLine:!1}),a.jsx(qe,{tick:{fontSize:10,fill:"#6b7280"},axisLine:!1,tickLine:!1,domain:L}),y.map((g,k)=>a.jsx(Hr,{x:g.x,stroke:"#10b981",strokeWidth:1,strokeDasharray:"3 3"},`a3-marker-${l.id}-${k}`)),a.jsx(Ur,{content:g=>{const{active:k,label:I,payload:M}=g;if(!k||!I)return null;const R=M||[],T=w[I]||[];return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-md shadow-md p-2 text-xs text-gray-700",children:[a.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:I}),R.map(_=>!_||_.value==null||Number.isNaN(_.value)?null:a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-gray-500",children:_.name||_.dataKey}),a.jsx("span",{className:"font-medium text-gray-900",children:_.value})]},_.dataKey)),T.length>0&&a.jsxs("div",{className:"mt-2 border-t border-gray-100 pt-1",children:[a.jsx("div",{className:"text-[10px] font-semibold text-emerald-700 mb-1",children:"A3s ending this month"}),T.map((_,Y)=>a.jsxs("div",{className:"text-[10px] text-emerald-800 leading-snug",children:[_.title,_.endDate&&a.jsxs("span",{className:"text-[10px] text-gray-500",children:[" ","(",_.endDate,")"]})]},Y))]})]})}}),a.jsx(Xr,{wrapperStyle:{fontSize:"12px"}}),a.jsx(pe,{type:"monotone",dataKey:"actual",stroke:"#3b82f6",strokeWidth:2,dot:a.jsx(ba,{}),activeDot:{r:5},name:"Actual",connectNulls:!0}),l.targetMeetingRule==="within_range"?a.jsxs(a.Fragment,{children:[a.jsx(pe,{type:"monotone",dataKey:"minTarget",stroke:"#ef4444",strokeWidth:2,strokeDasharray:"3 3",dot:!1,activeDot:!1,name:"Min Target",connectNulls:!0}),a.jsx(pe,{type:"monotone",dataKey:"maxTarget",stroke:"#ef4444",strokeWidth:2,strokeDasharray:"3 3",dot:!1,activeDot:!1,name:"Max Target",connectNulls:!0})]}):a.jsx(pe,{type:"monotone",dataKey:"target",stroke:"#ef4444",strokeWidth:2,strokeDasharray:"5 5",dot:!1,name:"Target",connectNulls:!0})]})})})]},`${l.id}-chart`)})})]}),a.jsx(xa,{isOpen:f,onClose:()=>h(!1)}),a.jsx(ga,{isOpen:ne,onClose:()=>Q(!1),result:Z,metricName:X}),we&&Gr.createPortal(a.jsx("div",{className:"fixed p-3 bg-gray-800 text-white text-xs rounded shadow-lg z-[9999] whitespace-normal break-words w-64 pointer-events-none",style:{left:we.x,top:we.y},children:we.content}),document.body)]})};export{Oa as default};
