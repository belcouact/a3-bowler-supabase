import{a0 as y,r as d,O as e,ak as C,Y as k,X as M,aS as g,P as m,d as a,a7 as I,aC as f,a6 as S,a5 as j,aT as P,ay as T}from"./index-D3VPfSBn.js";import{C as A}from"./clipboard-list-Ga3MMQ1t.js";import{C as L}from"./clock-BCJSXpgS.js";import{C as O}from"./check-circle-2-Dj3_6L0a.js";const H=({isOpen:c,onClose:i,onSave:v,onDelete:p,initialData:r})=>{const{bowlers:u}=y(),[o,b]=d.useState("Core"),[t,l]=d.useState({title:"",description:"",owner:"",group:"",tag:"",linkedMetricIds:[],priority:"Medium",startDate:"",endDate:"",status:"In Progress"}),h=d.useMemo(()=>u.flatMap(s=>(s.metrics||[]).map(x=>({id:x.id,label:`${s.name} – ${x.name}`}))),[u]);if(d.useEffect(()=>{c&&(l(r?{title:r.title,description:r.description||"",owner:r.owner||"",group:r.group||"",tag:r.tag||"",linkedMetricIds:r.linkedMetricIds||[],priority:r.priority||"Medium",startDate:r.startDate||"",endDate:r.endDate||"",status:r.status||"In Progress"}:{title:"",description:"",owner:"",group:"",tag:"",linkedMetricIds:[],priority:"Medium",startDate:new Date().toISOString().split("T")[0],endDate:"",status:"In Progress"}),b("Core"))},[c,r]),!c)return null;const N=s=>{s.preventDefault(),v(t),i()},w=[{id:"Core",label:"Problem & Scope",icon:A,color:"text-emerald-500",bg:"bg-emerald-50"},{id:"Context",label:"Ownership & Timing",icon:g,color:"text-blue-500",bg:"bg-blue-50"},{id:"Alignment",label:"Strategic Alignment",icon:m,color:"text-purple-500",bg:"bg-purple-50"}];return e.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 sm:p-6",children:[e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity animate-in fade-in duration-300",onClick:i}),e.jsxs("div",{className:"relative w-full max-w-2xl bg-white rounded-2xl shadow-2xl border border-slate-200 overflow-hidden flex flex-col max-h-[90vh] animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-center justify-between bg-white sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2.5 bg-gradient-to-br from-emerald-50 to-teal-50 rounded-xl shadow-sm border border-emerald-100/50",children:e.jsx(C,{className:"w-6 h-6 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 leading-none",children:r?"Refine A3 Case":"Initialize A3 Case"}),e.jsxs("p",{className:"mt-1.5 text-xs font-medium text-slate-500 flex items-center gap-1.5",children:[e.jsx(k,{className:"w-3.5 h-3.5 text-emerald-500"}),"Structured problem solving framework"]})]})]}),e.jsx("button",{onClick:i,className:"p-2 hover:bg-slate-50 rounded-xl text-slate-400 hover:text-slate-600 transition-all border border-transparent hover:border-slate-100 active:scale-95",children:e.jsx(M,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-6 bg-slate-50/50 border-b border-slate-100 flex gap-1 pt-3",children:w.map(s=>e.jsxs("button",{onClick:()=>b(s.id),className:a("px-4 py-2.5 text-sm font-bold rounded-t-xl transition-all flex items-center gap-2 border-x border-t -mb-px relative group",o===s.id?"bg-white text-slate-900 border-slate-100 shadow-[0_-2px_10px_-3px_rgba(0,0,0,0.05)]":"text-slate-500 hover:text-slate-700 border-transparent hover:bg-slate-100/50"),children:[e.jsx("div",{className:a("p-1 rounded-md transition-colors",o===s.id?s.bg:"bg-transparent group-hover:bg-slate-200/50"),children:e.jsx(s.icon,{className:a("w-3.5 h-3.5",o===s.id?s.color:"text-slate-400")})}),s.label,o===s.id&&e.jsx("div",{className:a("absolute bottom-0 left-0 right-0 h-0.5",s.bg.replace("bg-","bg-").replace("-50","-500"))})]},s.id))}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6",children:e.jsxs("form",{id:"a3-case-form",onSubmit:N,className:"space-y-6",children:[o==="Core"&&e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[e.jsxs("div",{className:"flex items-start gap-4 rounded-xl border border-emerald-100 bg-emerald-50/40 px-4 py-4",children:[e.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm border border-emerald-50",children:e.jsx(I,{className:"h-5 w-5 text-emerald-500"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-bold text-emerald-900",children:"Problem Definition"}),e.jsx("p",{className:"text-xs text-emerald-700 leading-relaxed",children:"Clearly define the gap between current state and target state. This title will be used across all reporting and executive summaries."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:["A3 Case Title",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("span",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-wider",children:"Required"})]}),e.jsx("input",{type:"text",required:!0,placeholder:"e.g. Reduce Logistics Lead Time by 20%",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl text-sm focus:ring-4 focus:ring-emerald-500/10 focus:border-emerald-500 transition-all outline-none font-medium placeholder:text-slate-400",value:t.title,onChange:s=>l({...t,title:s.target.value}),autoFocus:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700",children:"Problem Description"}),e.jsx("textarea",{rows:4,placeholder:"Provide background on why this problem is being addressed now...",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl text-sm focus:ring-4 focus:ring-emerald-500/10 focus:border-emerald-500 transition-all outline-none font-medium placeholder:text-slate-400 resize-none",value:t.description,onChange:s=>l({...t,description:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700",children:"Priority Level"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full pl-4 pr-10 py-3 bg-white border border-slate-200 rounded-xl text-sm focus:ring-4 focus:ring-emerald-500/10 focus:border-emerald-500 transition-all outline-none font-bold appearance-none cursor-pointer",value:t.priority,onChange:s=>l({...t,priority:s.target.value}),children:[e.jsx("option",{value:"Low",children:"Low Priority"}),e.jsx("option",{value:"Medium",children:"Medium Priority"}),e.jsx("option",{value:"High",children:"High Priority"})]}),e.jsx(f,{className:"absolute right-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700",children:"Current Status"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full pl-4 pr-10 py-3 bg-white border border-slate-200 rounded-xl text-sm focus:ring-4 focus:ring-emerald-500/10 focus:border-emerald-500 transition-all outline-none font-bold appearance-none cursor-pointer",value:t.status,onChange:s=>l({...t,status:s.target.value}),children:[e.jsx("option",{value:"Not Started",children:"Not Started"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"On Hold",children:"On Hold"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]}),e.jsx(f,{className:"absolute right-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]})]})]}),o==="Context"&&e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700",children:"A3 Owner / Lead"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-8 h-8 rounded-lg bg-slate-50 flex items-center justify-center border border-slate-100 group-focus-within:bg-blue-50 group-focus-within:border-blue-100 transition-colors",children:e.jsx(g,{className:"w-4 h-4 text-slate-400 group-focus-within:text-blue-500"})}),e.jsx("input",{type:"text",placeholder:"Name of project lead",className:"w-full pl-14 pr-4 py-3 bg-white border border-slate-200 rounded-xl text-sm focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all outline-none font-medium",value:t.owner,onChange:s=>l({...t,owner:s.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700",children:"Strategic Group"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-8 h-8 rounded-lg bg-slate-50 flex items-center justify-center border border-slate-100 group-focus-within:bg-blue-50 group-focus-within:border-blue-100 transition-colors",children:e.jsx(S,{className:"w-4 h-4 text-slate-400 group-focus-within:text-blue-500"})}),e.jsx("input",{type:"text",placeholder:"e.g. Operations, Quality",className:"w-full pl-14 pr-4 py-3 bg-white border border-slate-200 rounded-xl text-sm focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all outline-none font-medium",value:t.group,onChange:s=>l({...t,group:s.target.value})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700",children:"Strategic Tags"}),e.jsx("p",{className:"text-[11px] text-slate-500 font-medium",children:"Use commas to separate multiple tags for cross-functional reporting."}),e.jsx("input",{type:"text",placeholder:"e.g. Safety, Cost-Reduction, Q1-Goal",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl text-sm focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all outline-none font-medium",value:t.tag,onChange:s=>l({...t,tag:s.target.value})})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-100",children:[e.jsxs("label",{className:"text-sm font-bold text-slate-700 mb-4 flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4 text-blue-500"}),"Project Timeline"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Start Date"}),e.jsxs("div",{className:"relative group",children:[e.jsx(j,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-blue-500 transition-colors pointer-events-none"}),e.jsx("input",{type:"date",className:"w-full pl-10 pr-4 py-3 bg-white border border-slate-200 rounded-xl text-sm focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all outline-none font-bold cursor-pointer",value:t.startDate,onChange:s=>l({...t,startDate:s.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Target Completion"}),e.jsxs("div",{className:"relative group",children:[e.jsx(j,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-blue-500 transition-colors pointer-events-none"}),e.jsx("input",{type:"date",className:"w-full pl-10 pr-4 py-3 bg-white border border-slate-200 rounded-xl text-sm focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all outline-none font-bold cursor-pointer",value:t.endDate,onChange:s=>l({...t,endDate:s.target.value})})]})]})]})]})]}),o==="Alignment"&&e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[e.jsxs("div",{className:"flex items-start gap-4 rounded-xl border border-purple-100 bg-purple-50/40 px-4 py-4",children:[e.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm border border-purple-50",children:e.jsx(m,{className:"h-5 w-5 text-purple-500"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-bold text-purple-900",children:"Performance Linkage"}),e.jsx("p",{className:"text-xs text-purple-700 leading-relaxed",children:"Connect this A3 to a specific Bowler metric to track how your problem-solving efforts impact high-level performance indicators."})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700",children:"Target Metric"}),h.length===0?e.jsxs("div",{className:"py-12 text-center rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50/50",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-2xl shadow-sm border border-slate-100 flex items-center justify-center mx-auto mb-4",children:e.jsx(m,{className:"w-6 h-6 text-slate-300"})}),e.jsx("p",{className:"text-sm font-bold text-slate-500",children:"No Metrics Found"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1 max-w-[240px] mx-auto",children:"Create metrics in the Metric Bowler first to enable linkage."})]}):e.jsxs("div",{className:"space-y-2 max-h-72 overflow-y-auto pr-2 custom-scrollbar",children:[e.jsxs("label",{className:a("flex items-center gap-4 p-4 rounded-xl border transition-all cursor-pointer group",!t.linkedMetricIds||t.linkedMetricIds.length===0?"bg-purple-50 border-purple-200 shadow-sm":"bg-white border-slate-200 hover:border-slate-300"),children:[e.jsx("div",{className:a("w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all",!t.linkedMetricIds||t.linkedMetricIds.length===0?"border-purple-500 bg-purple-500":"border-slate-300 group-hover:border-slate-400"),children:(!t.linkedMetricIds||t.linkedMetricIds.length===0)&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),e.jsx("input",{type:"radio",name:"linkedMetric",className:"hidden",checked:!t.linkedMetricIds||t.linkedMetricIds.length===0,onChange:()=>l({...t,linkedMetricIds:[]})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:a("text-sm font-bold",!t.linkedMetricIds||t.linkedMetricIds.length===0?"text-purple-900":"text-slate-600"),children:"None (Standalone A3)"}),e.jsx("span",{className:"text-[10px] font-medium text-slate-400",children:"Independent problem solving"})]})]}),h.map(s=>{const n=(t.linkedMetricIds&&t.linkedMetricIds[0]||"")===s.id;return e.jsxs("label",{className:a("flex items-center gap-4 p-4 rounded-xl border transition-all cursor-pointer group",n?"bg-purple-50 border-purple-200 shadow-sm":"bg-white border-slate-200 hover:border-slate-300"),children:[e.jsx("div",{className:a("w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all",n?"border-purple-500 bg-purple-500":"border-slate-300 group-hover:border-slate-400"),children:n&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),e.jsx("input",{type:"radio",name:"linkedMetric",className:"hidden",checked:n,onChange:()=>l({...t,linkedMetricIds:[s.id]})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:a("text-sm font-bold",n?"text-purple-900":"text-slate-700"),children:s.label.split(" – ")[1]}),e.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:e.jsx("span",{className:"text-[10px] font-bold text-slate-400 bg-slate-100 px-1.5 py-0.5 rounded uppercase",children:s.label.split(" – ")[0]})})]})]},s.id)})]})]})]})]})}),e.jsxs("div",{className:"px-6 py-5 bg-slate-50 border-t border-slate-100 flex items-center justify-between gap-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:r&&p&&e.jsx("button",{type:"button",onClick:()=>{confirm("Are you sure you want to delete this A3 case? This action cannot be undone.")&&(p(r.id),i())},className:"p-2.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all border border-transparent hover:border-red-100 group",title:"Delete A3 Case",children:e.jsx(P,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:i,className:"px-6 py-2.5 text-sm font-bold text-slate-600 hover:text-slate-800 hover:bg-white rounded-xl transition-all active:scale-95",children:"Cancel"}),e.jsxs("button",{type:"submit",form:"a3-case-form",className:"px-8 py-2.5 bg-emerald-600 text-white text-sm font-bold rounded-xl shadow-lg shadow-emerald-200 hover:bg-emerald-700 hover:shadow-emerald-300 transition-all active:scale-95 flex items-center gap-2",children:[r?e.jsx(O,{className:"w-4 h-4"}):e.jsx(T,{className:"w-4 h-4"}),r?"Save Changes":"Initialize Case"]})]})]})]})]})};export{H as default};
