import{c as S,r as g,a2 as T,ap as A,O as e,P as v,X as G,a6 as j,aU as w,d as N,a7 as I,at as R,aS as B,ay as L,aT as P,ah as E}from"./index-BMbMkMjb.js";/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=S("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),H=({isOpen:u,onClose:n,onSave:y,onDelete:b,initialData:t})=>{const[x,p]=g.useState("General"),k=T(),{user:m}=A(),[l,r]=g.useState({name:"",description:"",group:"",champion:"",commitment:"",tag:""}),[i,o]=g.useState([]);if(g.useEffect(()=>{u&&(p("General"),t?(r({name:t.name,description:t.description||"",group:t.group||"",champion:t.champion||"",commitment:t.commitment||"",tag:t.tag||""}),o(t.metrics||[])):(r({name:"",description:"",group:(m==null?void 0:m.plant)||"",champion:"",commitment:"",tag:""}),o([])))},[u,t,m]),!u)return null;const f=()=>{const s={id:E(),name:"",definition:"",owner:"",scope:"",attribute:"",targetMeetingRule:"gte"};o([...i,s])},d=(s,c,a)=>{o(i.map(h=>h.id===s?{...h,[c]:a}:h))},C=s=>{o(i.filter(c=>c.id!==s))},M=()=>{if(!l.name.trim()){k.error("Please provide a name for the Bowler List.");return}y({...l,metrics:i}),n()};return e.jsx("div",{className:"fixed inset-0 z-[150] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity","aria-hidden":"true",onClick:n}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),e.jsx("div",{className:"inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full border border-slate-200",children:e.jsxs("div",{className:"bg-white",children:[e.jsxs("div",{className:"px-3 py-2 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-indigo-500 to-blue-600 text-white shadow-lg shadow-blue-200",children:e.jsx(v,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-slate-900 tracking-tight",children:t?"Refine Metric Bowler":"Design New Bowler"}),e.jsx("p",{className:"text-xs text-slate-500 font-medium",children:t?"Configure performance dimensions and strategic metrics.":"Create a new structural framework for performance tracking."})]})]}),e.jsx("button",{onClick:n,className:"rounded-full p-1.5 text-slate-400 hover:bg-white hover:text-slate-600 transition-all hover:shadow-sm border border-transparent hover:border-slate-200","aria-label":"Close",children:e.jsx(G,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"px-3 bg-white border-b border-slate-100",children:e.jsx("nav",{className:"-mb-px flex space-x-1 py-1",children:[{id:"General",label:"Framework",icon:j},{id:"Metrics",label:"Metrics Library",icon:w}].map(s=>e.jsxs("button",{onClick:()=>p(s.id),className:N("flex items-center gap-1.5 py-1.5 px-2.5 rounded-lg font-bold text-xs transition-all duration-200",x===s.id?"bg-indigo-50 text-indigo-700 shadow-sm shadow-indigo-100":"text-slate-500 hover:bg-slate-50 hover:text-slate-700"),children:[e.jsx(s.icon,{className:N("w-3.5 h-3.5",x===s.id?"text-indigo-600":"text-slate-400")}),s.label]},s.id))})}),e.jsxs("div",{className:"px-3 py-3 min-h-[350px] max-h-[70vh] overflow-y-auto bg-white",children:[x==="General"&&e.jsxs("div",{className:"space-y-3 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[e.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-indigo-100 bg-indigo-50/40 px-2.5 py-2",children:[e.jsx("div",{className:"p-1 bg-white rounded-lg shadow-sm border border-indigo-50",children:e.jsx(I,{className:"h-3.5 w-3.5 text-indigo-500"})}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-xs font-bold text-indigo-900",children:"Strategic Alignment"}),e.jsx("p",{className:"text-[10px] text-indigo-700 leading-relaxed",children:"Define the structural metadata for this performance dashboard. Groups and tags enable cross-functional consolidation and executive reporting."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:[e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"space-y-2 p-2.5 rounded-xl border border-slate-100 bg-slate-50/30",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx("div",{className:"w-1 h-2.5 bg-indigo-500 rounded-full"}),e.jsx("h4",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Identification"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-bold text-slate-600 mb-1 ml-1",children:"Bowler Identity *"}),e.jsx("input",{type:"text",className:"w-full bg-white border border-slate-200 rounded-lg shadow-sm py-1.5 px-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all text-xs font-medium placeholder:text-slate-300",value:l.name,onChange:s=>r({...l,name:s.target.value}),placeholder:"e.g. Operations Excellence 2024"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-bold text-slate-600 mb-1 ml-1",children:"Strategic Intent"}),e.jsx("textarea",{className:"w-full bg-white border border-slate-200 rounded-lg shadow-sm py-1.5 px-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all text-xs font-medium placeholder:text-slate-300 min-h-[60px] resize-none",value:l.description,onChange:s=>r({...l,description:s.target.value}),placeholder:"Describe the performance scope and objectives..."})]})]})}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"space-y-2 p-2.5 rounded-xl border border-slate-100 bg-slate-50/30",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx("div",{className:"w-1 h-2.5 bg-emerald-500 rounded-full"}),e.jsx("h4",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Ownership & Structure"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-bold text-slate-600 mb-1 ml-1 flex items-center gap-1",children:[e.jsx(R,{className:"w-2.5 h-2.5 text-slate-400"}),"Champion"]}),e.jsx("input",{type:"text",className:"w-full bg-white border border-slate-200 rounded-lg shadow-sm py-1.5 px-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all text-xs font-medium",value:l.champion,onChange:s=>r({...l,champion:s.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-bold text-slate-600 mb-1 ml-1 flex items-center gap-1",children:[e.jsx(B,{className:"w-2.5 h-2.5 text-slate-400"}),"Functional Team"]}),e.jsxs("select",{className:"w-full bg-white border border-slate-200 rounded-lg shadow-sm py-1.5 px-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all text-xs font-medium",value:l.commitment,onChange:s=>r({...l,commitment:s.target.value}),children:[e.jsx("option",{value:"",children:"Assign Team"}),["Quality","Engineering","R&D","Workshop","Production","GBS","Procurement","Planning","EH&S","Facility","Sales & Marketing"].map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-bold text-slate-600 mb-1 ml-1 flex items-center gap-1",children:[e.jsx(j,{className:"w-2.5 h-2.5 text-slate-400"}),"Group"]}),e.jsx("input",{type:"text",className:"w-full bg-white border border-slate-200 rounded-lg shadow-sm py-1.5 px-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all text-xs font-medium",value:l.group,onChange:s=>r({...l,group:s.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-bold text-slate-600 mb-1 ml-1 flex items-center gap-1",children:[e.jsx(F,{className:"w-2.5 h-2.5 text-slate-400"}),"Tags"]}),e.jsx("input",{type:"text",placeholder:"Comma separated",className:"w-full bg-white border border-slate-200 rounded-lg shadow-sm py-1.5 px-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all text-xs font-medium placeholder:text-slate-300",value:l.tag,onChange:s=>r({...l,tag:s.target.value})})]})]})]})]})})]})]}),x==="Metrics"&&e.jsxs("div",{className:"space-y-3 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between p-2.5 rounded-xl bg-slate-50 border border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"p-1 bg-white rounded-lg shadow-sm",children:e.jsx(w,{className:"h-3.5 w-3.5 text-indigo-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Performance Metrics"}),e.jsx("p",{className:"text-[10px] text-slate-500",children:i.length===0?"Begin by adding your first strategic metric":`${i.length} defined metric${i.length>1?"s":""}`})]})]}),e.jsxs("button",{onClick:f,className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-bold rounded-xl shadow-lg shadow-indigo-100 text-white bg-indigo-600 hover:bg-indigo-700 transition-all active:scale-95 gap-1.5",children:[e.jsx(L,{className:"w-3.5 h-3.5"}),"New Metric"]})]}),e.jsx("div",{className:"space-y-2.5",children:i.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-10 border-2 border-dashed border-slate-100 rounded-3xl bg-slate-50/20",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-2xl shadow-sm flex items-center justify-center mb-3",children:e.jsx(v,{className:"w-6 h-6 text-slate-200"})}),e.jsx("p",{className:"text-xs font-medium text-slate-400",children:"No metrics configured yet"}),e.jsx("button",{onClick:f,className:"mt-3 text-xs font-bold text-indigo-600 hover:text-indigo-700 underline underline-offset-4",children:"Click here to add one"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-2.5",children:i.map((s,c)=>e.jsxs("div",{className:"group border border-slate-100 rounded-2xl p-2.5 bg-white hover:border-indigo-100 hover:shadow-xl hover:shadow-slate-100 transition-all relative",children:[e.jsx("button",{onClick:()=>C(s.id),className:"absolute top-3 right-3 p-1.5 rounded-lg text-slate-300 hover:text-rose-500 hover:bg-rose-50 opacity-0 group-hover:opacity-100 transition-all",title:"Remove Metric",children:e.jsx(P,{className:"w-3.5 h-3.5"})}),e.jsxs("div",{className:"flex items-center gap-2.5 mb-2.5",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-lg bg-slate-900 text-[9px] font-black text-white shadow-lg shadow-slate-200",children:(c+1).toString().padStart(2,"0")}),e.jsx("div",{className:"h-px flex-1 bg-slate-50"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-2.5",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-2.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-1",children:"Metric Title"}),e.jsx("input",{type:"text",className:"w-full bg-slate-50/50 border border-slate-100 rounded-xl py-1 px-2 text-xs font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all",value:s.name,onChange:a=>d(s.id,"name",a.target.value),placeholder:"Metric name..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-1",children:"Technical Definition"}),e.jsx("textarea",{className:"w-full bg-slate-50/50 border border-slate-100 rounded-xl py-1 px-2 text-xs font-medium focus:outline-none focus:ring-2 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all min-h-[50px] resize-none",value:s.definition||"",onChange:a=>d(s.id,"definition",a.target.value),placeholder:"How is this measured?"})]})]}),e.jsxs("div",{className:"space-y-2.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-1",children:"Owner"}),e.jsx("input",{type:"text",className:"w-full bg-slate-50/50 border border-slate-100 rounded-xl py-1 px-2 text-xs font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all",value:s.owner||"",onChange:a=>d(s.id,"owner",a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-1",children:"Data Type"}),e.jsxs("select",{className:"w-full bg-slate-50/50 border border-slate-100 rounded-xl py-1 px-2 text-xs font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all",value:s.attribute||"",onChange:a=>d(s.id,"attribute",a.target.value),children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"Accumulative",children:"Accumulative"}),e.jsx("option",{value:"Individual data",children:"Individual data"}),e.jsx("option",{value:"Moving average",children:"Moving average"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-1",children:"Target Logic"}),e.jsxs("select",{className:"w-full bg-slate-50/50 border border-slate-100 rounded-xl py-1 px-2 text-xs font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all",value:s.targetMeetingRule,onChange:a=>d(s.id,"targetMeetingRule",a.target.value),children:[e.jsx("option",{value:"gte",children:"Higher is better (≥)"}),e.jsx("option",{value:"lte",children:"Lower is better (≤)"}),e.jsx("option",{value:"within_range",children:"Within Range"})]})]})]})]})]},s.id))})})]})]}),e.jsxs("div",{className:"px-4 py-3 bg-slate-50/80 border-t border-slate-100 flex flex-col sm:flex-row justify-between items-center gap-3",children:[e.jsx("div",{className:"order-2 sm:order-1",children:t&&b&&e.jsx("button",{type:"button",onClick:()=>{confirm("Are you sure you want to delete this bowler list?")&&(b(t.id),n())},className:"inline-flex items-center justify-center px-3 py-1.5 border border-transparent text-xs font-bold text-rose-600 bg-rose-50 hover:bg-rose-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500 transition-all",children:"Delete Framework"})}),e.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto order-1 sm:order-2",children:[e.jsx("button",{type:"button",onClick:n,className:"w-full sm:w-auto inline-flex justify-center items-center px-3 py-1.5 border border-slate-200 shadow-sm text-xs font-bold rounded-xl text-slate-700 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all",children:"Cancel"}),e.jsx("button",{type:"button",onClick:M,className:"w-full sm:w-auto inline-flex justify-center items-center rounded-xl border border-transparent shadow-lg shadow-indigo-500/30 px-4 py-2 bg-gradient-to-r from-indigo-600 to-violet-600 text-sm font-bold text-white hover:from-indigo-700 hover:to-violet-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all transform hover:scale-[1.02]",children:t?"Save Changes":"Create Framework"})]})]})]})})]})})};export{H as default};
