import{c as S,r as m,a2 as B,ap as A,O as e,P as b,X as G,a6 as w,aU as N,d as u,a7 as I,at as R,aT as L,az as P,au as y,ah as z}from"./index-DXJwJ3uS.js";/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=S("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),H=({isOpen:h,onClose:n,onSave:k,onDelete:f,initialData:t})=>{const[o,v]=m.useState("General"),C=B(),{user:g}=A(),[a,i]=m.useState({name:"",description:"",group:"",champion:"",commitment:"",tag:""}),[r,d]=m.useState([]);if(m.useEffect(()=>{h&&(v("General"),t?(i({name:t.name,description:t.description||"",group:t.group||"",champion:t.champion||"",commitment:t.commitment||"",tag:t.tag||""}),d(t.metrics||[])):(i({name:"",description:"",group:(g==null?void 0:g.plant)||"",champion:"",commitment:"",tag:""}),d([])))},[h,t,g]),!h)return null;const j=()=>{const s={id:z(),name:"",definition:"",owner:"",scope:"",attribute:"",targetMeetingRule:"gte"};d([...r,s])},c=(s,x,l)=>{d(r.map(p=>p.id===s?{...p,[x]:l}:p))},M=s=>{d(r.filter(x=>x.id!==s))},T=()=>{if(!a.name.trim()){C.error("Please provide a name for the Bowler List.");return}k({...a,metrics:r}),n()};return e.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 sm:p-6","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity animate-in fade-in duration-300",onClick:n}),e.jsxs("div",{className:"relative w-full max-w-2xl bg-white rounded-2xl shadow-2xl border border-slate-200 overflow-hidden flex flex-col max-h-[90vh] animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-center justify-between bg-white sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2.5 bg-gradient-to-br from-indigo-500 to-blue-600 rounded-xl shadow-sm border border-indigo-100/50",children:e.jsx(b,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 leading-none",children:t?"Refine Metric Bowler":"Design New Bowler"}),e.jsx("p",{className:"text-xs font-medium text-slate-500 mt-1.5",children:t?"Configure performance dimensions and strategic metrics.":"Create a new structural framework for performance tracking."})]})]}),e.jsx("button",{onClick:n,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-50 rounded-lg transition-all","aria-label":"Close",children:e.jsx(G,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-6 bg-slate-50/50 border-b border-slate-100 flex gap-1 pt-3",children:[{id:"General",label:"Framework",icon:w,color:"text-indigo-600",bg:"bg-indigo-50"},{id:"Metrics",label:"Metrics Library",icon:N,color:"text-blue-600",bg:"bg-blue-50"}].map(s=>e.jsxs("button",{onClick:()=>v(s.id),className:u("px-4 py-2.5 text-sm font-bold rounded-t-xl transition-all flex items-center gap-2 border-x border-t -mb-px relative group",o===s.id?"bg-white text-slate-900 border-slate-100 shadow-[0_-2px_10px_-3px_rgba(0,0,0,0.05)]":"text-slate-500 hover:text-slate-700 border-transparent hover:bg-slate-100/50"),children:[e.jsx("div",{className:u("p-1 rounded-md transition-colors",o===s.id?s.bg:"bg-transparent group-hover:bg-slate-200/50"),children:e.jsx(s.icon,{className:u("w-3.5 h-3.5",o===s.id?s.color:"text-slate-400")})}),s.label,o===s.id&&e.jsx("div",{className:u("absolute bottom-0 left-0 right-0 h-0.5",s.bg.replace("bg-","bg-").replace("-50","-500"))})]},s.id))}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6",children:[o==="General"&&e.jsxs("div",{className:"space-y-3 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[e.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-indigo-100 bg-indigo-50/40 px-2.5 py-2",children:[e.jsx("div",{className:"p-1 bg-white rounded-lg shadow-sm border border-indigo-50",children:e.jsx(I,{className:"h-3.5 w-3.5 text-indigo-500"})}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-xs font-bold text-indigo-900",children:"Strategic Alignment"}),e.jsx("p",{className:"text-[10px] text-indigo-700 leading-relaxed",children:"Define the structural metadata for this performance dashboard. Groups and tags enable cross-functional consolidation and executive reporting."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:[e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"space-y-2 p-2.5 rounded-xl border border-slate-100 bg-slate-50/30",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx("div",{className:"w-1 h-2.5 bg-indigo-500 rounded-full"}),e.jsx("h4",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Identification"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-bold text-slate-600 mb-1 ml-1",children:"Bowler Identity *"}),e.jsx("input",{type:"text",className:"w-full bg-white border border-slate-200 rounded-lg shadow-sm py-1.5 px-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all text-xs font-medium placeholder:text-slate-300",value:a.name,onChange:s=>i({...a,name:s.target.value}),placeholder:"e.g. Operations Excellence 2024"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-bold text-slate-600 mb-1 ml-1",children:"Strategic Intent"}),e.jsx("textarea",{className:"w-full bg-white border border-slate-200 rounded-lg shadow-sm py-1.5 px-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all text-xs font-medium placeholder:text-slate-300 min-h-[60px] resize-none",value:a.description,onChange:s=>i({...a,description:s.target.value}),placeholder:"Describe the performance scope and objectives..."})]})]})}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"space-y-2 p-2.5 rounded-xl border border-slate-100 bg-slate-50/30",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx("div",{className:"w-1 h-2.5 bg-emerald-500 rounded-full"}),e.jsx("h4",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Ownership & Structure"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-bold text-slate-600 mb-1 ml-1 flex items-center gap-1",children:[e.jsx(R,{className:"w-2.5 h-2.5 text-slate-400"}),"Champion"]}),e.jsx("input",{type:"text",className:"w-full bg-white border border-slate-200 rounded-lg shadow-sm py-1.5 px-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all text-xs font-medium",value:a.champion,onChange:s=>i({...a,champion:s.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-bold text-slate-600 mb-1 ml-1 flex items-center gap-1",children:[e.jsx(L,{className:"w-2.5 h-2.5 text-slate-400"}),"Functional Team"]}),e.jsxs("select",{className:"w-full bg-white border border-slate-200 rounded-lg shadow-sm py-1.5 px-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all text-xs font-medium",value:a.commitment,onChange:s=>i({...a,commitment:s.target.value}),children:[e.jsx("option",{value:"",children:"Assign Team"}),["Quality","Engineering","R&D","Workshop","Production","GBS","Procurement","Planning","EH&S","Facility","Sales & Marketing"].map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-bold text-slate-600 mb-1 ml-1 flex items-center gap-1",children:[e.jsx(w,{className:"w-2.5 h-2.5 text-slate-400"}),"Group"]}),e.jsx("input",{type:"text",className:"w-full bg-white border border-slate-200 rounded-lg shadow-sm py-1.5 px-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all text-xs font-medium",value:a.group,onChange:s=>i({...a,group:s.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[10px] font-bold text-slate-600 mb-1 ml-1 flex items-center gap-1",children:[e.jsx(E,{className:"w-2.5 h-2.5 text-slate-400"}),"Tags"]}),e.jsx("input",{type:"text",placeholder:"Comma separated",className:"w-full bg-white border border-slate-200 rounded-lg shadow-sm py-1.5 px-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all text-xs font-medium placeholder:text-slate-300",value:a.tag,onChange:s=>i({...a,tag:s.target.value})})]})]})]})]})})]})]}),o==="Metrics"&&e.jsxs("div",{className:"space-y-3 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between p-2.5 rounded-xl bg-slate-50 border border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"p-1 bg-white rounded-lg shadow-sm",children:e.jsx(N,{className:"h-3.5 w-3.5 text-indigo-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Performance Metrics"}),e.jsx("p",{className:"text-[10px] text-slate-500",children:r.length===0?"Begin by adding your first strategic metric":`${r.length} defined metric${r.length>1?"s":""}`})]})]}),e.jsxs("button",{onClick:j,className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-bold rounded-xl shadow-lg shadow-indigo-100 text-white bg-indigo-600 hover:bg-indigo-700 transition-all active:scale-95 gap-1.5",children:[e.jsx(P,{className:"w-3.5 h-3.5"}),"New Metric"]})]}),e.jsx("div",{className:"space-y-2.5",children:r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-10 border-2 border-dashed border-slate-100 rounded-3xl bg-slate-50/20",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-2xl shadow-sm flex items-center justify-center mb-3",children:e.jsx(b,{className:"w-6 h-6 text-slate-200"})}),e.jsx("p",{className:"text-xs font-medium text-slate-400",children:"No metrics configured yet"}),e.jsx("button",{onClick:j,className:"mt-3 text-xs font-bold text-indigo-600 hover:text-indigo-700 underline underline-offset-4",children:"Click here to add one"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-2.5",children:r.map((s,x)=>e.jsxs("div",{className:"group border border-slate-100 rounded-2xl p-2.5 bg-white hover:border-indigo-100 hover:shadow-xl hover:shadow-slate-100 transition-all relative",children:[e.jsx("button",{onClick:()=>M(s.id),className:"absolute top-3 right-3 p-1.5 rounded-lg text-slate-300 hover:text-rose-500 hover:bg-rose-50 opacity-0 group-hover:opacity-100 transition-all",title:"Remove Metric",children:e.jsx(y,{className:"w-3.5 h-3.5"})}),e.jsxs("div",{className:"flex items-center gap-2.5 mb-2.5",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-lg bg-slate-900 text-[9px] font-black text-white shadow-lg shadow-slate-200",children:(x+1).toString().padStart(2,"0")}),e.jsx("div",{className:"h-px flex-1 bg-slate-50"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-2.5",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-2.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-1",children:"Metric Title"}),e.jsx("input",{type:"text",className:"w-full bg-slate-50/50 border border-slate-100 rounded-xl py-1 px-2 text-xs font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all",value:s.name,onChange:l=>c(s.id,"name",l.target.value),placeholder:"Metric name..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-1",children:"Technical Definition"}),e.jsx("textarea",{className:"w-full bg-slate-50/50 border border-slate-100 rounded-xl py-1 px-2 text-xs font-medium focus:outline-none focus:ring-2 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all min-h-[50px] resize-none",value:s.definition||"",onChange:l=>c(s.id,"definition",l.target.value),placeholder:"How is this measured?"})]})]}),e.jsxs("div",{className:"space-y-2.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-1",children:"Owner"}),e.jsx("input",{type:"text",className:"w-full bg-slate-50/50 border border-slate-100 rounded-xl py-1 px-2 text-xs font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all",value:s.owner||"",onChange:l=>c(s.id,"owner",l.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-1",children:"Data Type"}),e.jsxs("select",{className:"w-full bg-slate-50/50 border border-slate-100 rounded-xl py-1 px-2 text-xs font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all",value:s.attribute||"",onChange:l=>c(s.id,"attribute",l.target.value),children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"Accumulative",children:"Accumulative"}),e.jsx("option",{value:"Individual data",children:"Individual data"}),e.jsx("option",{value:"Moving average",children:"Moving average"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-1",children:"Target Logic"}),e.jsxs("select",{className:"w-full bg-slate-50/50 border border-slate-100 rounded-xl py-1 px-2 text-xs font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all",value:s.targetMeetingRule,onChange:l=>c(s.id,"targetMeetingRule",l.target.value),children:[e.jsx("option",{value:"gte",children:"Higher is better (≥)"}),e.jsx("option",{value:"lte",children:"Lower is better (≤)"}),e.jsx("option",{value:"within_range",children:"Within Range"})]})]})]})]})]},s.id))})})]})]}),e.jsxs("div",{className:"px-6 py-5 bg-slate-50 border-t border-slate-100 flex items-center justify-between gap-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:t&&f&&e.jsx("button",{type:"button",onClick:()=>{confirm("Are you sure you want to delete this Bowler? This action cannot be undone.")&&(f(t.id),n())},className:"p-2.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all border border-transparent hover:border-red-100 group",title:"Delete Bowler",children:e.jsx(y,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:n,className:"px-6 py-2.5 text-sm font-bold text-slate-600 hover:text-slate-800 hover:bg-white rounded-xl transition-all active:scale-95",children:"Cancel"}),e.jsxs("button",{type:"button",onClick:T,className:"px-8 py-2.5 bg-indigo-600 text-white text-sm font-bold rounded-xl shadow-lg shadow-indigo-200 hover:bg-indigo-700 hover:shadow-indigo-300 transition-all active:scale-95 flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),t?"Save Changes":"Create Bowler"]})]})]})]})]})};export{H as default};
