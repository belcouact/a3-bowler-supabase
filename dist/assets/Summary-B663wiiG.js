const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-BzDuqvlu.js","assets/index-CZVK4Mmm.js","assets/index-CFkCubvb.css"])))=>i.map(i=>d[i]);
import{V as E,W as A,r as b,Y as I,O as e,a1 as u,am as R,an as y}from"./index-CZVK4Mmm.js";const D=()=>{const{id:f}=E(),{a3Cases:j}=A(),t=j.find(s=>s.id===f),l=b.useRef(null),[i,n]=b.useState(!1),c=I(),N=async()=>{if(!(!l.current||!t))try{n(!0);const[{default:s},{default:v}]=await Promise.all([y(()=>import("./html2canvas.esm-CBrSDip1.js"),[]),y(()=>import("./jspdf.es.min-BzDuqvlu.js").then(d=>d.j),__vite__mapDeps([0,1,2]))]),o=(await s(l.current,{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff",ignoreElements:d=>d.classList.contains("export-ignore")})).toDataURL("image/png"),a=new v({orientation:"landscape",unit:"mm",format:"a4"}),x=a.internal.pageSize.getWidth(),m=a.internal.pageSize.getHeight(),r=a.getImageProperties(o),h=Math.min((x-20)/r.width,(m-20)/r.height),p=r.width*h,g=r.height*h,w=(x-p)/2,P=(m-g)/2;a.addImage(o,"PNG",w,P,p,g),a.save(`A3-${t.title.replace(/[^a-z0-9]/gi,"_")}.pdf`),c.success("PDF exported successfully!")}catch(s){console.error("Export failed:",s),c.error("Failed to export PDF.")}finally{n(!1)}};return t?e.jsxs("div",{className:"space-y-6",ref:l,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"A3 Problem Solving Report"}),e.jsxs("button",{onClick:N,disabled:i,className:"export-ignore px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium flex items-center disabled:opacity-50",children:[i?e.jsx(u,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(R,{className:"w-4 h-4 mr-2"}),i?"Exporting...":"Export PDF"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-700 uppercase tracking-wider mb-2 border-b pb-1",children:"1. Problem Statement"}),e.jsx("div",{className:"text-sm text-gray-600 space-y-2",children:e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Problem:"})," ",t.problemStatement||"Not defined"]})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-700 uppercase tracking-wider mb-2 border-b pb-1",children:"3. Root Cause Analysis (5 Whys)"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-4",children:[t.mindMapText&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-100",children:[e.jsx("h5",{className:"text-xs font-semibold text-gray-500 mb-1",children:"5 Whys Analysis:"}),e.jsx("p",{className:"whitespace-pre-wrap font-mono text-xs",children:t.mindMapText})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-semibold text-gray-500 mb-1",children:"Identified Root Cause:"}),t.rootCause?e.jsx("p",{className:"whitespace-pre-wrap",children:t.rootCause}):e.jsx("p",{className:"italic text-gray-500",children:"Root cause not identified yet."})]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-700 uppercase tracking-wider mb-2 border-b pb-1",children:"5. Results & Follow-up"}),t.resultImages&&t.resultImages.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Result Evidence"}),e.jsxs("div",{className:"relative w-full bg-gray-50 border border-gray-200 rounded overflow-hidden",style:{height:Math.max(150,...t.resultImages.map(s=>(s.y+s.height)*.5))+20},children:[e.jsx("div",{className:"w-full h-full relative",children:t.resultImages.map(s=>e.jsx("div",{style:{position:"absolute",left:s.x*.5,top:s.y*.5,width:s.width*.5,height:s.height*.5},children:e.jsx("img",{src:s.src,alt:"result evidence",className:"w-full h-full object-contain"})},s.id))}),e.jsx("div",{className:"absolute bottom-1 right-1 text-[10px] text-gray-400",children:"* Scaled (50%)"})]})]}),e.jsx("div",{className:"text-sm text-gray-600 space-y-2",children:e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Outcome:"})," ",t.results||"No results recorded yet."]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-700 uppercase tracking-wider mb-2 border-b pb-1",children:"2. Data Analysis"}),t.dataAnalysisImages&&t.dataAnalysisImages.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Evidence"}),e.jsxs("div",{className:"relative w-full bg-gray-50 border border-gray-200 rounded overflow-hidden",style:{height:Math.max(150,...t.dataAnalysisImages.map(s=>(s.y+s.height)*.5))+20},children:[e.jsx("div",{className:"w-full h-full relative",children:t.dataAnalysisImages.map(s=>e.jsx("div",{style:{position:"absolute",left:s.x*.5,top:s.y*.5,width:s.width*.5,height:s.height*.5},children:e.jsx("img",{src:s.src,alt:"evidence",className:"w-full h-full object-contain"})},s.id))}),e.jsx("div",{className:"absolute bottom-1 right-1 text-[10px] text-gray-400",children:"* Scaled (50%)"})]})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[e.jsx("span",{className:"font-semibold block mb-1",children:"Observation:"}),t.dataAnalysisObservations||"No data observations recorded."]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-700 uppercase tracking-wider mb-2 border-b pb-1",children:"4. Action Plan"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase",children:"Task"}),e.jsx("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase",children:"Owner"}),e.jsx("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.actionPlanTasks&&t.actionPlanTasks.length>0?t.actionPlanTasks.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-2 py-1 text-xs text-gray-900",children:s.name}),e.jsx("td",{className:"px-2 py-1 text-xs text-gray-500",children:s.owner}),e.jsx("td",{className:"px-2 py-1 text-xs text-gray-600",children:s.status})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"px-2 py-4 text-xs text-center text-gray-500",children:"No actions defined."})})})]})})]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(u,{className:"w-8 h-8 animate-spin text-blue-600"}),e.jsx("p",{className:"mt-3 text-base font-medium text-gray-700",children:"Loading application data..."})]})})};export{D as default};
