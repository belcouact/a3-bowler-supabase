import{V as h,Y as g,r,O as t,a3 as p}from"./index-DrdjLC35.js";import{I as v}from"./ImageCanvas-C846lSD6.js";const N=()=>{const{id:o}=h(),{a3Cases:m,updateA3Case:l}=g(),e=m.find(s=>s.id===o),a=r.useRef(null),[n,i]=r.useState([]),[c,u]=r.useState(500);r.useEffect(()=>{if(e){e.resultImages&&JSON.stringify(e.resultImages)!==JSON.stringify(n)&&i(e.resultImages||[]),e.resultCanvasHeight&&e.resultCanvasHeight!==c&&u(e.resultCanvasHeight);const s=e.results||"";a.current&&a.current.value!==s&&(a.current.value=s)}},[e==null?void 0:e.id]);const d=s=>{i(s),e&&l({...e,resultImages:s})},f=s=>{u(s),e&&l({...e,resultCanvasHeight:s})},x=()=>{if(e&&a.current){const s=a.current.value;s!==e.results&&l({...e,results:s})}};return e?t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Results & Follow-up"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Document the results achieved after implementing the action plan."}),t.jsx(v,{images:n,onImagesChange:d,height:c,onHeightChange:f,label:"Result Evidence (Paste or Upload Images)"}),t.jsx("div",{className:"space-y-4 mt-6",children:t.jsxs("div",{children:[t.jsx("label",{htmlFor:"results",className:"block text-sm font-medium text-gray-700 mb-1",children:"Actual Results"}),t.jsx("textarea",{ref:a,id:"results",rows:8,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-3 border",placeholder:"Describe what happened after actions were taken...",defaultValue:e.results||"",onBlur:x})]})})]})}):t.jsx("div",{className:"flex items-center justify-center py-16",children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx(p,{className:"w-8 h-8 animate-spin text-blue-600"}),t.jsx("p",{className:"mt-3 text-base font-medium text-gray-700",children:"Loading application data..."})]})})};export{N as default};
