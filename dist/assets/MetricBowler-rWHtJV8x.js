import{c as he,g as Wt,i as te,G as wt,a as Fe,m as Gt,b as ue,d as le,R as N,T as Vt,s as Be,f as ae,e as it,L as Oe,h as Yt,j as Kt,r as T,u as Xe,k as Je,l as Ht,n as Ut,o as qt,w as ot,p as jt,q as Ee,D as Xt,t as Jt,E as Zt,C as Qt,A as er,v as ke,x as tr,y as We,z as rr,B as nr,F as Nt,H as ar,I as st,J as ir,K as or,M as sr,N as lr,O as a,X as kt,S as Ot,P as cr,Q as lt,U as ur,V as dr,W as fr,Y as hr,Z as mr,_ as pr,$ as yr,a0 as St,a1 as xr,a2 as gr,a3 as vr,a4 as br}from"./index-DQs7FhmG.js";import{T as wr,A as jr,a as ct}from"./target-CJVyaa6r.js";import{analyzeMetric as Nr}from"./aiService-CZcZic4K.js";import{C as ut}from"./calendar-_gM_YEie.js";/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=he("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=he("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=he("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=he("MousePointer",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=he("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=he("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);function At(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function _r(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return Wt(r,n)}function Dr(e,t,n){var r=n==="width",i=e.x,o=e.y,s=e.width,c=e.height;return t===1?{start:r?i:o,end:r?i+s:o+c}:{start:r?i+s:o+c,end:r?i:o}}function _e(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var o=n();return e*(t-e*o/2-r)>=0&&e*(t+e*o/2-i)<=0}function $r(e,t){return At(e,t+1)}function Tr(e,t,n,r,i){for(var o=(r||[]).slice(),s=t.start,c=t.end,u=0,m=1,d=s,y=function(){var p=r==null?void 0:r[u];if(p===void 0)return{v:At(r,m)};var x=u,g,S=function(){return g===void 0&&(g=n(p,x)),g},w=p.coordinate,b=u===0||_e(e,w,S,d,c);b||(u=0,d=s,m+=1),b&&(d=w+e*(S()/2+i),u+=m)},f;m<=o.length;)if(f=y(),f)return f.v;return[]}function Ae(e){"@babel/helpers - typeof";return Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(e)}function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ht(Object(n),!0).forEach(function(r){Cr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cr(e,t,n){return t=Er(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Er(e){var t=zr(e,"string");return Ae(t)=="symbol"?t:t+""}function zr(e,t){if(Ae(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ae(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mr(e,t,n,r,i){for(var o=(r||[]).slice(),s=o.length,c=t.start,u=t.end,m=function(f){var h=o[f],p,x=function(){return p===void 0&&(p=n(h,f)),p};if(f===s-1){var g=e*(h.coordinate+e*x()/2-u);o[f]=h=G(G({},h),{},{tickCoord:g>0?h.coordinate-g*e:h.coordinate})}else o[f]=h=G(G({},h),{},{tickCoord:h.coordinate});var S=_e(e,h.tickCoord,x,c,u);S&&(u=h.tickCoord-e*(x()/2+i),o[f]=G(G({},h),{},{isShow:!0}))},d=s-1;d>=0;d--)m(d);return o}function Ir(e,t,n,r,i,o){var s=(r||[]).slice(),c=s.length,u=t.start,m=t.end;if(o){var d=r[c-1],y=n(d,c-1),f=e*(d.coordinate+e*y/2-m);s[c-1]=d=G(G({},d),{},{tickCoord:f>0?d.coordinate-f*e:d.coordinate});var h=_e(e,d.tickCoord,function(){return y},u,m);h&&(m=d.tickCoord-e*(y/2+i),s[c-1]=G(G({},d),{},{isShow:!0}))}for(var p=o?c-1:c,x=function(w){var b=s[w],A,P=function(){return A===void 0&&(A=n(b,w)),A};if(w===0){var z=e*(b.coordinate-e*P()/2-u);s[w]=b=G(G({},b),{},{tickCoord:z<0?b.coordinate-z*e:b.coordinate})}else s[w]=b=G(G({},b),{},{tickCoord:b.coordinate});var M=_e(e,b.tickCoord,P,u,m);M&&(u=b.tickCoord+e*(P()/2+i),s[w]=G(G({},b),{},{isShow:!0}))},g=0;g<p;g++)x(g);return s}function Ze(e,t,n){var r=e.tick,i=e.ticks,o=e.viewBox,s=e.minTickGap,c=e.orientation,u=e.interval,m=e.tickFormatter,d=e.unit,y=e.angle;if(!i||!i.length||!r)return[];if(te(u)||wt.isSsr)return $r(i,typeof u=="number"&&te(u)?u:0);var f=[],h=c==="top"||c==="bottom"?"width":"height",p=d&&h==="width"?Fe(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},x=function(b,A){var P=ue(m)?m(b.value,A):b.value;return h==="width"?_r(Fe(P,{fontSize:t,letterSpacing:n}),p,y):Fe(P,{fontSize:t,letterSpacing:n})[h]},g=i.length>=2?Gt(i[1].coordinate-i[0].coordinate):1,S=Dr(o,g,h);return u==="equidistantPreserveStart"?Tr(g,S,x,i,s):(u==="preserveStart"||u==="preserveStartEnd"?f=Ir(g,S,x,i,s,u==="preserveStartEnd"):f=Mr(g,S,x,i,s),f.filter(function(w){return w.isShow}))}var Lr=["viewBox"],Fr=["viewBox"],Br=["ticks"];function xe(e){"@babel/helpers - typeof";return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xe(e)}function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye.apply(this,arguments)}function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mt(Object(n),!0).forEach(function(r){Qe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Re(e,t){if(e==null)return{};var n=Rr(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Rr(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Wr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_t(r.key),r)}}function Gr(e,t,n){return t&&pt(e.prototype,t),n&&pt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vr(e,t,n){return t=De(t),Yr(e,Pt()?Reflect.construct(t,n||[],De(e).constructor):t.apply(e,n))}function Yr(e,t){if(t&&(xe(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kr(e)}function Kr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pt=function(){return!!e})()}function De(e){return De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},De(e)}function Hr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ge(e,t)}function Ge(e,t){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ge(e,t)}function Qe(e,t,n){return t=_t(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(e){var t=Ur(e,"string");return xe(t)=="symbol"?t:t+""}function Ur(e,t){if(xe(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(xe(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var we=function(e){function t(n){var r;return Wr(this,t),r=Vr(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return Hr(t,e),Gr(t,[{key:"shouldComponentUpdate",value:function(r,i){var o=r.viewBox,s=Re(r,Lr),c=this.props,u=c.viewBox,m=Re(c,Fr);return!Be(o,u)||!Be(s,m)||!Be(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.x,s=i.y,c=i.width,u=i.height,m=i.orientation,d=i.tickSize,y=i.mirror,f=i.tickMargin,h,p,x,g,S,w,b=y?-1:1,A=r.tickSize||d,P=te(r.tickCoord)?r.tickCoord:r.coordinate;switch(m){case"top":h=p=r.coordinate,g=s+ +!y*u,x=g-b*A,w=x-b*f,S=P;break;case"left":x=g=r.coordinate,p=o+ +!y*c,h=p-b*A,S=h-b*f,w=P;break;case"right":x=g=r.coordinate,p=o+ +y*c,h=p+b*A,S=h+b*f,w=P;break;default:h=p=r.coordinate,g=s+ +y*u,x=g+b*A,w=x+b*f,S=P;break}return{line:{x1:h,y1:x,x2:p,y2:g},tick:{x:S,y:w}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,s;switch(i){case"left":s=o?"start":"end";break;case"right":s=o?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=o?"start":"end";break;default:s=o?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,c=r.height,u=r.orientation,m=r.mirror,d=r.axisLine,y=I(I(I({},ae(this.props,!1)),ae(d,!1)),{},{fill:"none"});if(u==="top"||u==="bottom"){var f=+(u==="top"&&!m||u==="bottom"&&m);y=I(I({},y),{},{x1:i,y1:o+f*c,x2:i+s,y2:o+f*c})}else{var h=+(u==="left"&&!m||u==="right"&&m);y=I(I({},y),{},{x1:i+h*s,y1:o,x2:i+h*s,y2:o+c})}return N.createElement("line",ye({},y,{className:le("recharts-cartesian-axis-line",it(d,"className"))}))}},{key:"renderTicks",value:function(r,i,o){var s=this,c=this.props,u=c.tickLine,m=c.stroke,d=c.tick,y=c.tickFormatter,f=c.unit,h=Ze(I(I({},this.props),{},{ticks:r}),i,o),p=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),g=ae(this.props,!1),S=ae(d,!1),w=I(I({},g),{},{fill:"none"},ae(u,!1)),b=h.map(function(A,P){var z=s.getTickLineCoord(A),M=z.line,U=z.tick,Y=I(I(I(I({textAnchor:p,verticalAnchor:x},g),{},{stroke:"none",fill:m},S),U),{},{index:P,payload:A,visibleTicksCount:h.length,tickFormatter:y});return N.createElement(Oe,ye({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},Yt(s.props,A,P)),u&&N.createElement("line",ye({},w,M,{className:le("recharts-cartesian-axis-tick-line",it(u,"className"))})),d&&t.renderTickItem(d,Y,"".concat(ue(y)?y(A.value,P):A.value).concat(f||"")))});return N.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var r=this,i=this.props,o=i.axisLine,s=i.width,c=i.height,u=i.ticksGenerator,m=i.className,d=i.hide;if(d)return null;var y=this.props,f=y.ticks,h=Re(y,Br),p=f;return ue(u)&&(p=f&&f.length>0?u(this.props):u(h)),s<=0||c<=0||!p||!p.length?null:N.createElement(Oe,{className:le("recharts-cartesian-axis",m),ref:function(g){r.layerReference=g}},o&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),Kt.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,o){var s,c=le(i.className,"recharts-cartesian-axis-tick-value");return N.isValidElement(r)?s=N.cloneElement(r,I(I({},i),{},{className:c})):ue(r)?s=r(I(I({},i),{},{className:c})):s=N.createElement(Vt,ye({},i,{className:"recharts-cartesian-axis-tick-value"}),o),s}}])}(T.Component);Qe(we,"displayName","CartesianAxis");Qe(we,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var qr=["x1","y1","x2","y2","key"],Xr=["offset"];function fe(e){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fe(e)}function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yt(Object(n),!0).forEach(function(r){Jr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jr(e,t,n){return t=Zr(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zr(e){var t=Qr(e,"string");return fe(t)=="symbol"?t:t+""}function Qr(e,t){if(fe(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(fe(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},de.apply(this,arguments)}function xt(e,t){if(e==null)return{};var n=en(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function en(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var tn=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,i=t.x,o=t.y,s=t.width,c=t.height,u=t.ry;return N.createElement("rect",{x:i,y:o,ry:u,width:s,height:c,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Dt(e,t){var n;if(N.isValidElement(e))n=N.cloneElement(e,t);else if(ue(e))n=e(t);else{var r=t.x1,i=t.y1,o=t.x2,s=t.y2,c=t.key,u=xt(t,qr),m=ae(u,!1);m.offset;var d=xt(m,Xr);n=N.createElement("line",de({},d,{x1:r,y1:i,x2:o,y2:s,fill:"none",key:c}))}return n}function rn(e){var t=e.x,n=e.width,r=e.horizontal,i=r===void 0?!0:r,o=e.horizontalPoints;if(!i||!o||!o.length)return null;var s=o.map(function(c,u){var m=V(V({},e),{},{x1:t,y1:c,x2:t+n,y2:c,key:"line-".concat(u),index:u});return Dt(i,m)});return N.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function nn(e){var t=e.y,n=e.height,r=e.vertical,i=r===void 0?!0:r,o=e.verticalPoints;if(!i||!o||!o.length)return null;var s=o.map(function(c,u){var m=V(V({},e),{},{x1:c,y1:t,x2:c,y2:t+n,key:"line-".concat(u),index:u});return Dt(i,m)});return N.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function an(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,i=e.y,o=e.width,s=e.height,c=e.horizontalPoints,u=e.horizontal,m=u===void 0?!0:u;if(!m||!t||!t.length)return null;var d=c.map(function(f){return Math.round(f+i-i)}).sort(function(f,h){return f-h});i!==d[0]&&d.unshift(0);var y=d.map(function(f,h){var p=!d[h+1],x=p?i+s-f:d[h+1]-f;if(x<=0)return null;var g=h%t.length;return N.createElement("rect",{key:"react-".concat(h),y:f,x:r,height:x,width:o,stroke:"none",fill:t[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return N.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},y)}function on(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,i=e.fillOpacity,o=e.x,s=e.y,c=e.width,u=e.height,m=e.verticalPoints;if(!n||!r||!r.length)return null;var d=m.map(function(f){return Math.round(f+o-o)}).sort(function(f,h){return f-h});o!==d[0]&&d.unshift(0);var y=d.map(function(f,h){var p=!d[h+1],x=p?o+c-f:d[h+1]-f;if(x<=0)return null;var g=h%r.length;return N.createElement("rect",{key:"react-".concat(h),x:f,y:s,width:x,height:u,stroke:"none",fill:r[g],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return N.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},y)}var sn=function(t,n){var r=t.xAxis,i=t.width,o=t.height,s=t.offset;return jt(Ze(V(V(V({},we.defaultProps),r),{},{ticks:Ee(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),s.left,s.left+s.width,n)},ln=function(t,n){var r=t.yAxis,i=t.width,o=t.height,s=t.offset;return jt(Ze(V(V(V({},we.defaultProps),r),{},{ticks:Ee(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),s.top,s.top+s.height,n)},me={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function $t(e){var t,n,r,i,o,s,c=Xe(),u=Je(),m=Ht(),d=V(V({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:me.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:me.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:me.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:me.horizontalFill,vertical:(o=e.vertical)!==null&&o!==void 0?o:me.vertical,verticalFill:(s=e.verticalFill)!==null&&s!==void 0?s:me.verticalFill,x:te(e.x)?e.x:m.left,y:te(e.y)?e.y:m.top,width:te(e.width)?e.width:m.width,height:te(e.height)?e.height:m.height}),y=d.x,f=d.y,h=d.width,p=d.height,x=d.syncWithTicks,g=d.horizontalValues,S=d.verticalValues,w=Ut(),b=qt();if(!te(h)||h<=0||!te(p)||p<=0||!te(y)||y!==+y||!te(f)||f!==+f)return null;var A=d.verticalCoordinatesGenerator||sn,P=d.horizontalCoordinatesGenerator||ln,z=d.horizontalPoints,M=d.verticalPoints;if((!z||!z.length)&&ue(P)){var U=g&&g.length,Y=P({yAxis:b?V(V({},b),{},{ticks:U?g:b.ticks}):void 0,width:c,height:u,offset:m},U?!0:x);ot(Array.isArray(Y),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(fe(Y),"]")),Array.isArray(Y)&&(z=Y)}if((!M||!M.length)&&ue(A)){var ne=S&&S.length,Q=A({xAxis:w?V(V({},w),{},{ticks:ne?S:w.ticks}):void 0,width:c,height:u,offset:m},ne?!0:x);ot(Array.isArray(Q),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(fe(Q),"]")),Array.isArray(Q)&&(M=Q)}return N.createElement("g",{className:"recharts-cartesian-grid"},N.createElement(tn,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),N.createElement(rn,de({},d,{offset:m,horizontalPoints:z,xAxis:w,yAxis:b})),N.createElement(nn,de({},d,{offset:m,verticalPoints:M,xAxis:w,yAxis:b})),N.createElement(an,de({},d,{horizontalPoints:z})),N.createElement(on,de({},d,{verticalPoints:M})))}$t.displayName="CartesianGrid";var cn=["type","layout","connectNulls","ref"],un=["key"];function ge(e){"@babel/helpers - typeof";return ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ge(e)}function gt(e,t){if(e==null)return{};var n=dn(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function dn(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se.apply(this,arguments)}function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vt(Object(n),!0).forEach(function(r){re(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pe(e){return pn(e)||mn(e)||hn(e)||fn()}function fn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hn(e,t){if(e){if(typeof e=="string")return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ve(e,t)}}function mn(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pn(e){if(Array.isArray(e))return Ve(e)}function Ve(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ct(r.key),r)}}function xn(e,t,n){return t&&bt(e.prototype,t),n&&bt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function gn(e,t,n){return t=$e(t),vn(e,Tt()?Reflect.construct(t,n||[],$e(e).constructor):t.apply(e,n))}function vn(e,t){if(t&&(ge(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bn(e)}function bn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tt=function(){return!!e})()}function $e(e){return $e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$e(e)}function wn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ye(e,t)}function Ye(e,t){return Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ye(e,t)}function re(e,t,n){return t=Ct(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e){var t=jn(e,"string");return ge(t)=="symbol"?t:t+""}function jn(e,t){if(ge(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ge(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ce=function(e){function t(){var n;yn(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=gn(this,t,[].concat(i)),re(n,"state",{isAnimationFinished:!0,totalLength:0}),re(n,"generateSimpleStrokeDasharray",function(s,c){return"".concat(c,"px ").concat(s-c,"px")}),re(n,"getStrokeDasharray",function(s,c,u){var m=u.reduce(function(S,w){return S+w});if(!m)return n.generateSimpleStrokeDasharray(c,s);for(var d=Math.floor(s/m),y=s%m,f=c-s,h=[],p=0,x=0;p<u.length;x+=u[p],++p)if(x+u[p]>y){h=[].concat(pe(u.slice(0,p)),[y-x]);break}var g=h.length%2===0?[0,f]:[f];return[].concat(pe(t.repeat(u,d)),pe(h),g).map(function(S){return"".concat(S,"px")}).join(", ")}),re(n,"id",ar("recharts-line-")),re(n,"pathRef",function(s){n.mainCurve=s}),re(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),re(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return wn(t,e),xn(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.points,c=o.xAxis,u=o.yAxis,m=o.layout,d=o.children,y=Jt(d,Zt);if(!y)return null;var f=function(x,g){return{x:x.x,y:x.y,value:x.value,errorVal:Nt(x.payload,g)}},h={clipPath:r?"url(#clipPath-".concat(i,")"):null};return N.createElement(Oe,h,y.map(function(p){return N.cloneElement(p,{key:"bar-".concat(p.props.dataKey),data:s,xAxis:c,yAxis:u,layout:m,dataPointFormatter:f})}))}},{key:"renderDots",value:function(r,i,o){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var c=this.props,u=c.dot,m=c.points,d=c.dataKey,y=ae(this.props,!1),f=ae(u,!0),h=m.map(function(x,g){var S=Z(Z(Z({key:"dot-".concat(g),r:3},y),f),{},{index:g,cx:x.x,cy:x.y,value:x.value,dataKey:d,payload:x.payload,points:m});return t.renderDotItem(u,S)}),p={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return N.createElement(Oe,Se({className:"recharts-line-dots",key:"dots"},p),h)}},{key:"renderCurveStatically",value:function(r,i,o,s){var c=this.props,u=c.type,m=c.layout,d=c.connectNulls;c.ref;var y=gt(c,cn),f=Z(Z(Z({},ae(y,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:r},s),{},{type:u,layout:m,connectNulls:d});return N.createElement(Qt,Se({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var o=this,s=this.props,c=s.points,u=s.strokeDasharray,m=s.isAnimationActive,d=s.animationBegin,y=s.animationDuration,f=s.animationEasing,h=s.animationId,p=s.animateNewValues,x=s.width,g=s.height,S=this.state,w=S.prevPoints,b=S.totalLength;return N.createElement(er,{begin:d,duration:y,isActive:m,easing:f,from:{t:0},to:{t:1},key:"line-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var P=A.t;if(w){var z=w.length/c.length,M=c.map(function(F,oe){var se=Math.floor(oe*z);if(w[se]){var q=w[se],j=ke(q.x,F.x),Ie=ke(q.y,F.y);return Z(Z({},F),{},{x:j(P),y:Ie(P)})}if(p){var ee=ke(x*2,F.x),Pe=ke(g/2,F.y);return Z(Z({},F),{},{x:ee(P),y:Pe(P)})}return Z(Z({},F),{},{x:F.x,y:F.y})});return o.renderCurveStatically(M,r,i)}var U=ke(0,b),Y=U(P),ne;if(u){var Q="".concat(u).split(/[,\s]+/gim).map(function(F){return parseFloat(F)});ne=o.getStrokeDasharray(Y,b,Q)}else ne=o.generateSimpleStrokeDasharray(b,Y);return o.renderCurveStatically(c,r,i,{strokeDasharray:ne})})}},{key:"renderCurve",value:function(r,i){var o=this.props,s=o.points,c=o.isAnimationActive,u=this.state,m=u.prevPoints,d=u.totalLength;return c&&s&&s.length&&(!m&&d>0||!tr(m,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,s=i.dot,c=i.points,u=i.className,m=i.xAxis,d=i.yAxis,y=i.top,f=i.left,h=i.width,p=i.height,x=i.isAnimationActive,g=i.id;if(o||!c||!c.length)return null;var S=this.state.isAnimationFinished,w=c.length===1,b=le("recharts-line",u),A=m&&m.allowDataOverflow,P=d&&d.allowDataOverflow,z=A||P,M=We(g)?this.id:g,U=(r=ae(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},Y=U.r,ne=Y===void 0?3:Y,Q=U.strokeWidth,F=Q===void 0?2:Q,oe=rr(s)?s:{},se=oe.clipDot,q=se===void 0?!0:se,j=ne*2+F;return N.createElement(Oe,{className:b},A||P?N.createElement("defs",null,N.createElement("clipPath",{id:"clipPath-".concat(M)},N.createElement("rect",{x:A?f:f-h/2,y:P?y:y-p/2,width:A?h:h*2,height:P?p:p*2})),!q&&N.createElement("clipPath",{id:"clipPath-dots-".concat(M)},N.createElement("rect",{x:f-j/2,y:y-j/2,width:h+j,height:p+j}))):null,!w&&this.renderCurve(z,M),this.renderErrorBar(z,M),(w||s)&&this.renderDots(z,q,M),(!x||S)&&nr.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var o=r.length%2!==0?[].concat(pe(r),[0]):r,s=[],c=0;c<i;++c)s=[].concat(pe(s),pe(o));return s}},{key:"renderDotItem",value:function(r,i){var o;if(N.isValidElement(r))o=N.cloneElement(r,i);else if(ue(r))o=r(i);else{var s=i.key,c=gt(i,un),u=le("recharts-line-dot",typeof r!="boolean"?r.className:"");o=N.createElement(Xt,Se({key:s},c,{className:u}))}return o}}])}(T.PureComponent);re(ce,"displayName","Line");re(ce,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!wt.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});re(ce,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,s=e.dataKey,c=e.bandSize,u=e.displayedData,m=e.offset,d=t.layout,y=u.map(function(f,h){var p=Nt(f,s);return d==="horizontal"?{x:st({axis:n,ticks:i,bandSize:c,entry:f,index:h}),y:We(p)?null:r.scale(p),value:p,payload:f}:{x:We(p)?null:n.scale(p),y:st({axis:r,ticks:o,bandSize:c,entry:f,index:h}),value:p,payload:f}});return Z({points:y,layout:d},m)});function ve(e){"@babel/helpers - typeof";return ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ve(e)}function Nn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mt(r.key),r)}}function On(e,t,n){return t&&kn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Sn(e,t,n){return t=Te(t),An(e,Et()?Reflect.construct(t,n||[],Te(e).constructor):t.apply(e,n))}function An(e,t){if(t&&(ve(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pn(e)}function Pn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Et(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Et=function(){return!!e})()}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Te(e)}function _n(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ke(e,t)}function Ke(e,t){return Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ke(e,t)}function zt(e,t,n){return t=Mt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mt(e){var t=Dn(e,"string");return ve(t)=="symbol"?t:t+""}function Dn(e,t){if(ve(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ve(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function He(){return He=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},He.apply(this,arguments)}function $n(e){var t=e.xAxisId,n=Xe(),r=Je(),i=ir(t);return i==null?null:T.createElement(we,He({},i,{className:le("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return Ee(s,!0)}}))}var ze=function(e){function t(){return Nn(this,t),Sn(this,t,arguments)}return _n(t,e),On(t,[{key:"render",value:function(){return T.createElement($n,this.props)}}])}(T.Component);zt(ze,"displayName","XAxis");zt(ze,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function be(e){"@babel/helpers - typeof";return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(e)}function Tn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ft(r.key),r)}}function En(e,t,n){return t&&Cn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zn(e,t,n){return t=Ce(t),Mn(e,It()?Reflect.construct(t,n||[],Ce(e).constructor):t.apply(e,n))}function Mn(e,t){if(t&&(be(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return In(e)}function In(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function It(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(It=function(){return!!e})()}function Ce(e){return Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ce(e)}function Ln(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}function Ue(e,t){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ue(e,t)}function Lt(e,t,n){return t=Ft(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ft(e){var t=Fn(e,"string");return be(t)=="symbol"?t:t+""}function Fn(e,t){if(be(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(be(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function qe(){return qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qe.apply(this,arguments)}var Bn=function(t){var n=t.yAxisId,r=Xe(),i=Je(),o=or(n);return o==null?null:T.createElement(we,qe({},o,{className:le("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(c){return Ee(c,!0)}}))},Me=function(e){function t(){return Tn(this,t),zn(this,t,arguments)}return Ln(t,e),En(t,[{key:"render",value:function(){return T.createElement(Bn,this.props)}}])}(T.Component);Lt(Me,"displayName","YAxis");Lt(Me,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var Rn=sr({chartName:"LineChart",GraphicalChild:ce,axisComponents:[{axisType:"xAxis",AxisComp:ze},{axisType:"yAxis",AxisComp:Me}],formatAxisMap:lr});const Wn=({isOpen:e,onClose:t})=>e?a.jsx("div",{className:"fixed inset-0 z-[70] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t}),a.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full sm:p-6",children:[a.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:a.jsxs("button",{type:"button",className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:t,children:[a.jsx("span",{className:"sr-only",children:"Close"}),a.jsx(kt,{className:"h-6 w-6"})]})}),a.jsx("div",{className:"sm:flex sm:items-start",children:a.jsxs("div",{className:"mt-3 sm:mt-0 sm:ml-4 w-full text-left",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",id:"modal-title",children:"Metric Bowler User Guide"}),a.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Sr,{className:"h-5 w-5 text-blue-500"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Editing Data"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Left click on any Target or Actual cell to edit its value. Right click to add a context note. Cells with notes are marked with a red triangle."})]})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(wr,{className:"h-5 w-5 text-blue-500"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Target Rules"}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Set rules in the Edit Metric window: ",">="," Target (default), ","<="," Target, or Within Range (e.g. {5,10}). Actual values violating the rule will be highlighted in red."]})]})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Pr,{className:"h-5 w-5 text-blue-500"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Bowler Info & Status Rules"}),a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Double-click on the Bowler Name or Description in the header to edit the Bowler information."}),a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"The sidebar color indicator reflects the bowler's status:"}),a.jsxs("ul",{className:"list-none space-y-1 text-sm text-gray-500",children:[a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),a.jsxs("span",{children:[a.jsx("strong",{className:"text-gray-700",children:"Green:"})," All metrics met targets in the latest month."]})]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full mr-2"}),a.jsxs("span",{children:[a.jsx("strong",{className:"text-gray-700",children:"Red:"})," Any metric failed for 3 consecutive months."]})]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full mr-2"}),a.jsxs("span",{children:[a.jsx("strong",{className:"text-gray-700",children:"Yellow:"})," Any metric missed target in latest month or last 2 months."]})]})]})]})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Ot,{className:"h-5 w-5 text-blue-500"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"AI Analysis"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Click the Sparkles icon on any chart to get an AI-powered analysis of the metric's performance trend."})]})]})]})]})}),a.jsx("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:a.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:t,children:"Got it"})})]})]})}):null,Gn=({isOpen:e,onClose:t,result:n,metricName:r})=>{if(!e||!n)return null;const i=()=>{switch(n.trend){case"capable":return a.jsx(kr,{className:"w-6 h-6 text-green-600"});case"improving":return a.jsx(lt,{className:"w-6 h-6 text-green-600"});case"degrading":return a.jsx(ft,{className:"w-6 h-6 text-red-600"});case"stable":return a.jsx(dt,{className:"w-6 h-6 text-blue-600"});case"unstable":return a.jsx(ct,{className:"w-6 h-6 text-orange-600"});case"incapable":return a.jsx(ur,{className:"w-6 h-6 text-red-600"});case"increasing":return a.jsx(lt,{className:"w-6 h-6 text-green-600"});case"decreasing":return a.jsx(ft,{className:"w-6 h-6 text-red-600"});case"fluctuating":return a.jsx(ct,{className:"w-6 h-6 text-orange-600"});default:return a.jsx(dt,{className:"w-6 h-6 text-gray-600"})}},o=()=>n.trend.charAt(0).toUpperCase()+n.trend.slice(1);return a.jsx("div",{className:"fixed inset-0 z-[70] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t}),a.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full sm:p-6",children:[a.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:a.jsxs("button",{type:"button",className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:t,children:[a.jsx("span",{className:"sr-only",children:"Close"}),a.jsx(kt,{className:"h-6 w-6","aria-hidden":"true"})]})}),a.jsx("div",{className:"sm:flex sm:items-start",children:a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[a.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:["AI Analysis: ",r]}),a.jsxs("div",{className:"mt-4 space-y-6",children:[a.jsxs("div",{className:"bg-blue-50 p-4 rounded-md",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Summary"}),a.jsx("p",{className:"text-sm text-blue-700",children:n.summary})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-md flex flex-col items-center justify-center",children:[a.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-2",children:"Trend"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[i(),a.jsx("span",{className:"text-sm font-semibold text-gray-900",children:o()})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-md flex flex-col items-center justify-center",children:[a.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-2",children:"Target Achievement"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(cr,{className:`w-5 h-5 ${n.achievementRate>=80?"text-green-500":n.achievementRate>=50?"text-yellow-500":"text-red-500"}`}),a.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[n.achievementRate.toFixed(1),"%"]})]})]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-2 flex items-center",children:[a.jsx(jr,{className:"w-4 h-4 mr-1 text-orange-500"}),"Suggestions"]}),n.suggestion.length>0?a.jsx("ul",{className:"text-sm text-gray-600 space-y-2 bg-orange-50 p-3 rounded-md border border-orange-100",children:n.suggestion.map((s,c)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"mr-2",children:"•"}),a.jsx("span",{children:s})]},c))}):a.jsx("p",{className:"text-sm text-gray-500 italic",children:"No specific suggestions detected."})]})]})]})}),a.jsx("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:a.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:t,children:"Close"})})]})]})})},Vn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Yn=e=>{const{cx:t,cy:n,payload:r}=e;return t===void 0||n===void 0||isNaN(t)||isNaN(n)||r.actual===null||r.actual===void 0?null:St(r.rule,r.rawTarget,r.rawActual)?a.jsx("circle",{cx:t,cy:n,r:5,fill:"#dc2626",stroke:"#fff",strokeWidth:2}):a.jsx("circle",{cx:t,cy:n,r:3,fill:"#3b82f6",strokeWidth:0})},Xn=()=>{const{id:e}=dr(),{bowlers:t,updateBowler:n,selectedModel:r}=fr(),i=hr(),[o,s]=T.useState(()=>`${new Date().getFullYear()}-04`),[c,u]=T.useState(()=>{const k=new Date().getFullYear(),v=3,_=new Date(k,v+11,1);return`${_.getFullYear()}-${String(_.getMonth()+1).padStart(2,"0")}`}),[m,d]=T.useState(!1),[y,f]=T.useState({}),[h,p]=T.useState({}),[x,g]=T.useState(!1),[S,w]=T.useState(""),[b,A]=T.useState(""),[P,z]=T.useState(null),[M,U]=T.useState(!1),[Y,ne]=T.useState(""),[Q,F]=T.useState({}),[oe,se]=T.useState(null),q=T.useMemo(()=>{const[l,k]=o.split("-"),v=parseInt(l,10),_=parseInt(k,10)-1,[$,O]=c.split("-"),D=parseInt($,10),L=parseInt(O,10)-1,B=(D-v)*12+(L-_)+1,R=[];if(B>0)for(let C=0;C<B;C++){const K=new Date(v,_+C,1),E=K.getMonth(),H=K.getFullYear(),X=Vn[E],J=`${H}-${String(E+1).padStart(2,"0")}`,W=`${H}/${X}`;R.push({key:J,label:W})}return R},[o,c]),j=t.find(l=>l.id===e),Ie=j?j.name:"Metric Bowler",ee=(j==null?void 0:j.metrics)||[];T.useEffect(()=>{if(j!=null&&j.metricStartDate){s(j.metricStartDate);const[l,k]=j.metricStartDate.split("-"),v=parseInt(l,10),_=parseInt(k,10)-1;if(!isNaN(v)&&!isNaN(_)){const $=new Date(v,_+11,1);u(`${$.getFullYear()}-${String($.getMonth()+1).padStart(2,"0")}`)}}},[j==null?void 0:j.metricStartDate]);const Pe=l=>{s(l),j&&n({...j,metricStartDate:l})},et=l=>{u(l)},Le=()=>{j&&n({...j,name:S,description:b}),g(!1)},Bt=async l=>{F(k=>({...k,[l.id]:!0}));try{const k=await Nr(l,r);z(k),ne(l.name),U(!0)}catch(k){console.error("Analysis failed",k)}finally{F(k=>({...k,[l.id]:!1}))}},tt=(l,k,v,_)=>{var D,L,B,R,C,K;if(!j)return;const $=ee.find(E=>E.id===l);if($&&v==="target"&&$.targetMeetingRule==="within_range"){const E=_.match(/^(?:\{|\[)?\s*(-?[\d.]+)\s*,\s*(-?[\d.]+)\s*(?:\}|\])?$/);if(!E){i.error("Invalid format: Target must be {min, max} (e.g., {5, 10})");const J=`cell-${l}-${k}-target`,W=document.getElementById(J);W&&(W.value=((L=(D=$.monthlyData)==null?void 0:D[k])==null?void 0:L.target)||"");return}const H=parseFloat(E[1]),X=parseFloat(E[2]);if(isNaN(H)||isNaN(X)){i.error("Invalid numbers: Target must contain valid numbers");const J=`cell-${l}-${k}-target`,W=document.getElementById(J);W&&(W.value=((R=(B=$.monthlyData)==null?void 0:B[k])==null?void 0:R.target)||"");return}if(H>=X){i.error("Invalid range: Min value must be strictly smaller than Max value");const J=`cell-${l}-${k}-target`,W=document.getElementById(J);W&&(W.value=((K=(C=$.monthlyData)==null?void 0:C[k])==null?void 0:K.target)||"");return}}const O=ee.map(E=>{if(E.id!==l)return E;const H=E.monthlyData||{},X=H[k]||{target:"",actual:""};return X[v]===_?E:{...E,monthlyData:{...H,[k]:{...X,[v]:_}}}});JSON.stringify(O)!==JSON.stringify(ee)&&n({...j,metrics:O})},Rt=(l,k,v,_)=>{if(!j)return;const $=ee.map(O=>{if(O.id!==l)return O;const D=O.monthlyData||{},L=D[k]||{target:"",actual:""};return{...O,monthlyData:{...D,[k]:{...L,[v]:_}}}});n({...j,metrics:$})},rt=(l,k,v,_,$)=>{l.preventDefault();const O=prompt("Enter note for this cell:",$);O!==null&&Rt(k,v,_==="target"?"targetNote":"actualNote",O)},nt=(l,k,v,_)=>{if(l.key==="ArrowUp"||l.key==="ArrowDown"||l.key==="ArrowLeft"||l.key==="ArrowRight"){l.preventDefault();let $=v,O=k,D=_;l.key==="ArrowUp"?k==="actual"?O="target":(O="actual",$=Math.max(0,v-1)):l.key==="ArrowDown"?k==="target"?O="actual":(O="target",$=Math.min(ee.length-1,v+1)):l.key==="ArrowLeft"?D=Math.max(0,_-1):l.key==="ArrowRight"&&(D=Math.min(q.length-1,_+1));const L=ee[$],B=q[D],R=`cell-${L.id}-${B.key}-${O}`,C=document.getElementById(R);C&&(C.focus(),C.select())}else l.key==="Enter"&&l.target.blur()};return!e&&t.length>0?a.jsx(mr,{to:`/metric-bowler/${t[0].id}`,replace:!0}):a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"px-6 py-5 border-b border-gray-200 bg-white flex justify-between items-center",children:[a.jsx("div",{onDoubleClick:()=>{j&&(w(j.name),A(j.description||""),g(!0))},className:"flex-1 mr-4",children:x?a.jsxs("div",{className:"flex flex-col space-y-2 max-w-md",onBlur:l=>{l.currentTarget.contains(l.relatedTarget)||Le()},children:[a.jsx("input",{type:"text",value:S,onChange:l=>w(l.target.value),onKeyDown:l=>l.key==="Enter"&&Le(),className:"text-xl font-semibold text-gray-900 border-b border-gray-300 focus:border-blue-500 outline-none",autoFocus:!0}),a.jsx("input",{type:"text",value:b,onChange:l=>A(l.target.value),onKeyDown:l=>l.key==="Enter"&&Le(),className:"text-sm text-gray-500 border-b border-gray-300 focus:border-blue-500 outline-none w-full",placeholder:"Description"})]}):a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900 cursor-pointer hover:text-blue-600 transition-colors",title:"Double-click to edit",children:Ie}),a.jsx("p",{className:"hidden md:block text-sm text-gray-500 mt-1 cursor-pointer hover:text-gray-700",title:"Double-click to edit",children:(j==null?void 0:j.description)||"Track key performance indicators and monthly targets."})]})}),a.jsxs("div",{className:"text-right flex flex-col items-end",children:[(j==null?void 0:j.champion)&&a.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Champion: ",j.champion]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>d(!0),className:"inline-flex items-center p-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",title:"Help Guide",children:a.jsx(Or,{className:"h-4 w-4"})}),a.jsxs("div",{className:"hidden sm:flex items-center space-x-2",children:[a.jsx("input",{type:"month",id:"startDate",value:o,onChange:l=>Pe(l.target.value),className:"block rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-1 border",title:"Start Date"}),a.jsx("span",{className:"text-gray-400",children:"-"}),a.jsx("input",{type:"month",id:"stopDate",value:c,onChange:l=>et(l.target.value),className:"block rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-1 border",title:"Stop Date"})]}),a.jsxs("div",{className:"flex sm:hidden items-center space-x-1",children:[a.jsxs("label",{className:"relative inline-flex items-center",children:[a.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 bg-white text-gray-700 shadow-sm",children:a.jsx(ut,{className:"w-4 h-4"})}),a.jsx("input",{type:"month",value:o,onChange:l=>Pe(l.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",title:"Start Date"})]}),a.jsx("span",{className:"text-gray-400",children:"-"}),a.jsxs("label",{className:"relative inline-flex items-center",children:[a.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 bg-white text-gray-700 shadow-sm",children:a.jsx(ut,{className:"w-4 h-4"})}),a.jsx("input",{type:"month",value:c,onChange:l=>et(l.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",title:"Stop Date"})]})]})]})]})]}),a.jsx("div",{className:"overflow-x-auto overflow-y-hidden no-scrollbar",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-auto",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider sticky left-0 bg-gray-50 z-10 border-r border-gray-200 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)] w-48",children:"Metric Name"}),a.jsx("th",{scope:"col",className:"px-2 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider w-24 border-r border-gray-200",children:"Scope"}),a.jsx("th",{scope:"col",className:"px-2 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider w-20 border-r border-gray-200",children:"Type"}),q.map(l=>a.jsx("th",{scope:"col",className:"px-1 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider text-gray-400 whitespace-normal break-words min-w-[3rem] border-r border-gray-200",children:l.label.replace("/"," ")},l.key))]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ee.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:3+q.length,className:"px-6 py-10 text-center text-gray-500 italic",children:"No metrics added yet. Use the + button to add metrics."})}):ee.map((l,k)=>a.jsxs(a.Fragment,{children:[a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors border-b-0",children:[a.jsx("td",{rowSpan:2,className:"px-4 py-4 text-sm font-medium text-gray-900 sticky left-0 bg-white z-10 hover:z-[60] border-r border-gray-200 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)] group-hover:bg-gray-50 align-top break-words",children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{className:"flex flex-col",children:a.jsxs("div",{className:"flex items-center flex-wrap",children:[a.jsx("span",{className:"mr-2",children:l.name}),a.jsx("div",{className:"inline-block",onMouseEnter:v=>{const _=v.currentTarget.getBoundingClientRect();se({x:_.right+8,y:_.top,content:a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"font-semibold mb-1",children:"Definition:"}),a.jsx("p",{className:"mb-2",children:l.definition||"N/A"}),a.jsx("p",{className:"font-semibold mb-1",children:"Owner:"}),a.jsx("p",{className:"mb-2",children:l.owner||"N/A"}),a.jsx("p",{className:"font-semibold mb-1",children:"Attribute:"}),a.jsx("p",{children:l.attribute||"N/A"})]})})},onMouseLeave:()=>se(null),children:a.jsx(yr,{className:"w-3.5 h-3.5 text-gray-400 hover:text-blue-500 cursor-help"})})]})})})}),a.jsx("td",{rowSpan:2,className:"px-2 py-4 whitespace-nowrap text-xs text-gray-700 bg-white border-r border-gray-200 border-b-0 align-top",children:l.scope||"-"}),a.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-xs font-medium text-gray-500 bg-gray-50/30 border-b border-gray-100 h-8",children:"Target"}),q.map((v,_)=>{var $,O,D,L,B,R;return a.jsxs("td",{className:"px-0 py-0 whitespace-nowrap text-xs text-gray-500 bg-gray-50/30 border-b border-r border-gray-100 h-8 p-0 relative group/cell",onContextMenu:C=>{var K,E;return rt(C,l.id,v.key,"target",((E=(K=l.monthlyData)==null?void 0:K[v.key])==null?void 0:E.targetNote)||"")},children:[a.jsx("input",{id:`cell-${l.id}-${v.key}-target`,type:"text",className:"w-full h-full bg-transparent text-center focus:outline-none focus:bg-white focus:ring-2 focus:ring-inset focus:ring-blue-500 px-1 min-w-[3rem]",defaultValue:((O=($=l.monthlyData)==null?void 0:$[v.key])==null?void 0:O.target)||"",onBlur:C=>tt(l.id,v.key,"target",C.target.value),onKeyDown:C=>nt(C,"target",k,_),title:((L=(D=l.monthlyData)==null?void 0:D[v.key])==null?void 0:L.targetNote)||""}),((R=(B=l.monthlyData)==null?void 0:B[v.key])==null?void 0:R.targetNote)&&a.jsx("div",{className:"absolute top-0 right-0 w-0 h-0 border-t-[6px] border-l-[6px] border-t-red-500 border-l-transparent pointer-events-none"})]},`${v.key}-target`)})]},`${l.id}-row1`),a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-xs font-medium text-gray-500 h-8 border-b border-r border-gray-100",children:"Actual"}),q.map((v,_)=>{var O,D,L,B,R,C,K,E,H,X,J,W;const $=St(l.targetMeetingRule,(D=(O=l.monthlyData)==null?void 0:O[v.key])==null?void 0:D.target,(B=(L=l.monthlyData)==null?void 0:L[v.key])==null?void 0:B.actual);return a.jsxs("td",{className:"px-0 py-0 whitespace-nowrap text-xs text-gray-500 h-8 p-0 relative group/cell border-b border-r border-gray-100",onContextMenu:ie=>{var je,Ne;return rt(ie,l.id,v.key,"actual",((Ne=(je=l.monthlyData)==null?void 0:je[v.key])==null?void 0:Ne.actualNote)||"")},children:[a.jsx("input",{id:`cell-${l.id}-${v.key}-actual`,type:"text",className:`w-full h-full bg-transparent text-center focus:outline-none focus:bg-white focus:ring-2 focus:ring-inset focus:ring-blue-500 px-1 min-w-[3rem] ${(C=(R=l.monthlyData)==null?void 0:R[v.key])!=null&&C.actual?$?"text-red-600 font-bold bg-red-50":"text-gray-900 font-semibold":"text-gray-400"}`,defaultValue:((E=(K=l.monthlyData)==null?void 0:K[v.key])==null?void 0:E.actual)||"",onBlur:ie=>tt(l.id,v.key,"actual",ie.target.value),onKeyDown:ie=>nt(ie,"actual",k,_),title:((X=(H=l.monthlyData)==null?void 0:H[v.key])==null?void 0:X.actualNote)||""}),((W=(J=l.monthlyData)==null?void 0:J[v.key])==null?void 0:W.actualNote)&&a.jsx("div",{className:"absolute top-0 right-0 w-0 h-0 border-t-[6px] border-l-[6px] border-t-red-500 border-l-transparent pointer-events-none"})]},`${v.key}-actual`)})]},`${l.id}-row2`)]}))})]})}),ee.length>0&&a.jsxs("div",{className:"p-6 bg-gray-50 border-t border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Metric Trends"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:ee.map(l=>{const k=q.map(O=>{var H,X,J,W;const D=(X=(H=l.monthlyData)==null?void 0:H[O.key])==null?void 0:X.target,L=(W=(J=l.monthlyData)==null?void 0:J[O.key])==null?void 0:W.actual;let B=null,R=null,C=null;if(D){const ie=D.match(/^(?:\{|\[)?\s*(-?[\d.]+)\s*,\s*(-?[\d.]+)\s*(?:\}|\])?$/);if(ie){const Ne=parseFloat(ie[1]),at=parseFloat(ie[2]);!isNaN(Ne)&&!isNaN(at)&&(R=Ne,C=at)}const je=parseFloat(D);isNaN(je)||(B=je)}const K=L?parseFloat(L):NaN,E=isNaN(K)?null:K;return{name:O.label.split("/")[1],fullLabel:O.label,target:B,minTarget:R,maxTarget:C,actual:E,rule:l.targetMeetingRule,rawTarget:D,rawActual:L}}),v=h[l.id]||{min:"",max:""},_=y[l.id]||!1,$=[v.min!==""&&!isNaN(parseFloat(v.min))?parseFloat(v.min):"auto",v.max!==""&&!isNaN(parseFloat(v.max))?parseFloat(v.max):"auto"];return a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:l.name}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:()=>Bt(l),disabled:Q[l.id],className:"p-1 rounded-md transition-colors text-blue-500 hover:text-blue-700 hover:bg-blue-50 disabled:opacity-50",title:"AI Analysis",children:Q[l.id]?a.jsx(xr,{className:"w-4 h-4 animate-spin"}):a.jsx(Ot,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>f(O=>({...O,[l.id]:!O[l.id]})),className:`p-1 rounded-md transition-colors ${_?"bg-gray-100 text-blue-600":"text-gray-400 hover:text-gray-600"}`,title:"Adjust Scale",children:a.jsx(Ar,{className:"w-4 h-4"})})]})]}),_&&a.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-md text-xs",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"font-medium text-gray-600",children:"Y-Axis Scale:"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-gray-500",children:"Min:"}),a.jsx("input",{type:"number",className:"w-20 p-1 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500",placeholder:"Auto",value:v.min,onChange:O=>p(D=>({...D,[l.id]:{...D[l.id],min:O.target.value}}))})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-gray-500",children:"Max:"}),a.jsx("input",{type:"number",className:"w-20 p-1 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500",placeholder:"Auto",value:v.max,onChange:O=>p(D=>({...D,[l.id]:{...D[l.id],max:O.target.value}}))})]})]})}),a.jsx("div",{className:"h-64 w-full",children:a.jsx(gr,{width:"100%",height:"100%",children:a.jsxs(Rn,{data:k,margin:{top:5,right:20,bottom:5,left:0},children:[a.jsx($t,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),a.jsx(ze,{dataKey:"name",tick:{fontSize:10,fill:"#6b7280"},axisLine:!1,tickLine:!1}),a.jsx(Me,{tick:{fontSize:10,fill:"#6b7280"},axisLine:!1,tickLine:!1,domain:$}),a.jsx(vr,{contentStyle:{borderRadius:"4px",border:"none",boxShadow:"0 2px 5px rgba(0,0,0,0.1)"},labelStyle:{color:"#374151",fontWeight:600}}),a.jsx(br,{wrapperStyle:{fontSize:"12px"}}),a.jsx(ce,{type:"monotone",dataKey:"actual",stroke:"#3b82f6",strokeWidth:2,dot:a.jsx(Yn,{}),activeDot:{r:5},name:"Actual",connectNulls:!0}),l.targetMeetingRule==="within_range"?a.jsxs(a.Fragment,{children:[a.jsx(ce,{type:"monotone",dataKey:"minTarget",stroke:"#ef4444",strokeWidth:2,strokeDasharray:"3 3",dot:!1,activeDot:!1,name:"Min Target",connectNulls:!0}),a.jsx(ce,{type:"monotone",dataKey:"maxTarget",stroke:"#ef4444",strokeWidth:2,strokeDasharray:"3 3",dot:!1,activeDot:!1,name:"Max Target",connectNulls:!0})]}):a.jsx(ce,{type:"monotone",dataKey:"target",stroke:"#ef4444",strokeWidth:2,strokeDasharray:"5 5",dot:!1,name:"Target",connectNulls:!0})]})})})]},`${l.id}-chart`)})})]}),a.jsx(Wn,{isOpen:m,onClose:()=>d(!1)}),a.jsx(Gn,{isOpen:M,onClose:()=>U(!1),result:P,metricName:Y}),oe&&pr.createPortal(a.jsx("div",{className:"fixed p-3 bg-gray-800 text-white text-xs rounded shadow-lg z-[9999] whitespace-normal break-words w-64 pointer-events-none",style:{left:oe.x,top:oe.y},children:oe.content}),document.body)]})};export{Xn as default};
